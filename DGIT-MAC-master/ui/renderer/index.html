<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DGit MAC</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #000000;
            --bg-secondary: #1c1c1e;
            --bg-tertiary: #2c2c2e;
            --text-primary: #ffffff;
            --text-secondary: #8e8e93;
            --accent-blue: #007aff;
            --accent-green: #30d158;
            --accent-red: #ff453a;
            --accent-orange: #ff9f0a;
            --accent-purple: #bf5af2;
            --border-color: #38383a;
            --hover-bg: #2c2c2e;
        }

        [data-theme="light"] {
            --bg-primary: #ffffff;
            --bg-secondary: #f2f2f7;
            --bg-tertiary: #e5e5ea;
            --text-primary: #000000;
            --text-secondary: #8e8e93;
            --border-color: #c6c6c8;
            --hover-bg: #e5e5ea;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            height: 100vh;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Î°úÎî© ÌôîÎ©¥ */
        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-primary);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .splash-logo {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .splash-logo-icon {
            width: 120px;
            height: 120px;
            background-image: url('../assets/icon.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            margin: 0 auto 30px;
            border-radius: 28px;
            animation: gentleFloat 4s ease-in-out infinite;
            opacity: 1;
        }
        
        .splash-logo-icon::before {
            display: none;
        }

        .splash-logo-text {
            font-size: 5rem;
            font-weight: 300;
            background: linear-gradient(135deg, #007aff, #5856d6, #af52de);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.6; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.05); }
        }
        
        @keyframes gentleFloat {
            0%, 100% { 
                transform: translateY(0px) scale(1); 
                opacity: 0.98;
            }
            50% { 
                transform: translateY(-12px) scale(1.03); 
                opacity: 1;
            }
        }

        .splash-loading {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1rem;
            color: var(--text-secondary);
        }

        .loading-dots {
            display: flex;
            gap: 4px;
        }

        .loading-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--accent-blue);
            animation: loadingPulse 1.4s infinite ease-in-out both;
        }

        .loading-dot:nth-child(1) { animation-delay: -0.32s; }
        .loading-dot:nth-child(2) { animation-delay: -0.16s; }

        @keyframes loadingPulse {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }

        /* Î©îÏù∏ Ïï± Ïª®ÌÖåÏù¥ÎÑà */
        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            opacity: 0;
            transition: opacity 0.3s ease;
            position: relative;
            z-index: 1;
        }

        .app-container.visible {
            opacity: 1;
        }

        /* ÌÉÄÏù¥ÌãÄÎ∞î */
        .title-bar {
            height: 28px;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            -webkit-app-region: drag;
            position: relative;
            padding: 0;
            z-index: 1000;
        }


        .title-text {
            flex: 1;
            text-align: center;
            font-size: 13px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .theme-toggle {
            -webkit-app-region: no-drag;
            background: none;
            border: none;
            color: var(--text-secondary);
            flex-shrink: 0;
            cursor: pointer;
            padding: 4px 16px;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .theme-toggle:hover {
            background: var(--hover-bg);
        }

        /* Ìôà ÌôîÎ©¥ Ïä§ÌÉÄÏùº */
        .home-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            padding: 40px;
            text-align: center;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
        }

        .home-title {
            margin-bottom: 40px;
        }
        
        .home-title-text {
            font-size: 4rem;
            font-weight: 600;
            background: linear-gradient(135deg, #007aff, #5856d6, #af52de);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -2px;
        }

        .home-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 3rem;
        }

        .home-buttons {
            display: flex;
            flex-direction: column;
            gap: 16px;
            width: 100%;
            max-width: 400px;
        }

        .home-button {
            display: flex;
            align-items: center;
            padding: 20px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
            width: 100%;
            max-width: 420px;
        }

        .home-button:hover {
            background: var(--hover-bg);
            transform: translateY(-2px);
            border-color: rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
        }
        
        .home-button:active {
            transform: translateY(0) scale(0.98);
        }

        .home-button-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: 500;
            color: white;
            margin-right: 16px;
            border: none;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transition: all 0.2s ease;
        }

        .home-button-icon.new-project {
            background: linear-gradient(135deg, #007aff, #0056cc);
        }

        .home-button-icon.current-project {
            background: linear-gradient(135deg, #34c759, #28a745);
        }

        .home-button-icon.recent-projects {
            background: linear-gradient(135deg, #ff9500, #e6850e);
        }

        .home-button-text {
            flex: 1;
        }

        .home-button-title {
            font-weight: 500;
            margin-bottom: 4px;
        }

        .home-button-desc {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* ÌîÑÎ°úÏ†ùÌä∏ ÏûëÏóÖ ÌôîÎ©¥ */
        .workspace {
            flex: 1;
            display: none;
            flex-direction: column;
        }

        .workspace.active {
            display: flex;
        }

        .workspace-header {
            height: 60px;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            padding: 0 20px;
            gap: 16px;
        }

        .project-info h2 {
            font-size: 1.2rem;
            font-weight: 500;
        }

        .project-path {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .workspace-content {
            flex: 1;
            display: flex;
        }

        .sidebar {
            width: 220px;
            background: rgba(28, 28, 30, 0.8);
            border-right: 0.5px solid var(--border-color);
            display: flex;
            flex-direction: column;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        .sidebar-nav {
            list-style: none;
            padding: 15px 10px;
        }

        .sidebar-nav li {
            margin-bottom: 8px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            margin: 2px 8px;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 10px;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .nav-link:hover {
            background: rgba(120, 120, 128, 0.16);
            color: var(--text-primary);
        }

        .nav-link.active {
            background: var(--accent-blue);
            color: white;
        }

        .nav-icon {
            margin-right: 12px;
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }
        
        .nav-link:hover .nav-icon {
            transform: scale(1.05);
        }
        
        .nav-link.active .nav-icon {
            transform: scale(1.1);
        }
        
        /* Context menu */
        .context-menu {
            position: fixed;
            background: rgba(28, 28, 30, 0.9);
            border: 0.5px solid var(--border-color);
            border-radius: 12px;
            padding: 8px;
            min-width: 160px;
            z-index: 3000;
            backdrop-filter: blur(40px);
            -webkit-backdrop-filter: blur(40px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            display: none;
        }
        
        .context-menu-item {
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            color: var(--text-primary);
            transition: background 0.2s ease;
        }
        
        .context-menu-item:hover {
            background: rgba(120, 120, 128, 0.16);
        }
        
        .context-menu-separator {
            height: 0.5px;
            background: var(--border-color);
            margin: 4px 0;
        }

        .sidebar-item {
            padding: 10px 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.9rem;
        }

        .sidebar-icon {
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .sidebar-item:hover,
        .sidebar-item.active {
            background: var(--hover-bg);
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .content-section {
            display: none;
            height: 100%;
            overflow-y: auto;
        }

        .content-section.active {
            display: block;
        }

        .content-section.hidden {
            display: none;
        }

        .content-section::-webkit-scrollbar {
            width: 8px;
        }

        .content-section::-webkit-scrollbar-track {
            background: var(--bg-tertiary);
            border-radius: 4px;
        }

        .content-section::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 4px;
        }

        .content-section::-webkit-scrollbar-thumb:hover {
            background: var(--text-secondary);
        }

        .content-area {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .file-list {
            max-height: calc(100vh - 300px);
            overflow-y: auto;
        }

        .file-list::-webkit-scrollbar {
            width: 8px;
        }

        .file-list::-webkit-scrollbar-track {
            background: var(--bg-tertiary);
            border-radius: 4px;
        }

        .file-list::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 4px;
        }

        .file-list::-webkit-scrollbar-thumb:hover {
            background: var(--text-secondary);
        }

        .commit-list {
            max-height: calc(100vh - 300px);
            overflow-y: auto;
        }

        .commit-list::-webkit-scrollbar {
            width: 8px;
        }

        .commit-list::-webkit-scrollbar-track {
            background: var(--bg-tertiary);
            border-radius: 4px;
        }

        .commit-list::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 4px;
        }

        .commit-list::-webkit-scrollbar-thumb:hover {
            background: var(--text-secondary);
        }

        .terminal-panel {
            height: 200px;
            background: var(--bg-tertiary);
            display: flex;
            flex-direction: column;
        }
        
        .terminal-header {
            background: rgba(28, 28, 30, 0.8);
            border-bottom: 0.5px solid var(--border-color);
            padding: 8px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        .header {
            background: rgba(28, 28, 30, 0.8);
            border-bottom: 0.5px solid var(--border-color);
            padding: 16px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            -webkit-app-region: drag;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        .terminal-controls {
            display: flex;
            gap: 8px;
        }
        
        .terminal-control-btn {
            background: rgba(120, 120, 128, 0.16);
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 6px 8px;
            border-radius: 6px;
            font-size: 0.8rem;
            transition: all 0.2s ease;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .terminal-control-btn:hover {
            background: rgba(120, 120, 128, 0.24);
            color: var(--text-primary);
            transform: scale(1.1);
        }

        .terminal-panel.collapsed {
            height: 40px !important;
        }

        .terminal-panel.collapsed .terminal-content {
            display: none;
        }

        .terminal-tabs {
            display: flex;
            gap: 16px;
        }

        .terminal-tab {
            padding: 8px 12px;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.2s ease;
            font-size: 0.9rem;
        }

        .terminal-tab.active {
            background: var(--hover-bg);
        }

        .terminal-content {
            flex: 1;
            padding: 12px;
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 12px;
            overflow-y: auto;
            line-height: 1.3;
        }
        
        .terminal-content div {
            margin-bottom: 4px;
        }

        /* ÌååÏùº Î¶¨Ïä§Ìä∏ */
        .file-list {
            display: grid;
            gap: 12px;
        }
        
        /* Pull to refresh */
        .pull-to-refresh {
            position: absolute;
            top: -60px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-secondary);
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }
        
        .pull-to-refresh.active {
            top: 20px;
        }

        .file-item {
            display: flex;
            align-items: center;
            padding: 16px;
            background: var(--bg-secondary);
            border: 0.5px solid var(--border-color);
            border-radius: 16px;
            transition: all 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            cursor: pointer;
        }

        .file-item:hover {
            background: var(--hover-bg);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        
        .file-item:active {
            transform: scale(0.98);
        }

        .file-thumbnail {
            width: 40px;
            height: 40px;
            background: var(--bg-tertiary);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            border: 1px solid var(--border-color);
        }

        .file-thumbnail.has-preview {
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .file-thumbnail.has-preview:hover {
            transform: scale(1.15);
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3), 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .file-thumbnail:active {
            transform: scale(0.95);
        }

        .file-info {
            flex: 1;
        }

        .file-name {
            font-weight: 500;
            margin-bottom: 4px;
        }

        .file-details {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .file-status {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--accent-green);
        }

        /* Ïª§Î∞ã ÌûàÏä§ÌÜ†Î¶¨ */
        .commit-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .commit-item {
            display: flex;
            gap: 16px;
            padding: 20px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }

        .commit-item:hover {
            background: var(--hover-bg);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .commit-timeline {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-right: 8px;
        }

        .commit-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--accent-blue);
            border: 3px solid var(--bg-primary);
            box-shadow: 0 0 0 2px var(--accent-blue);
            margin-bottom: 8px;
        }

        .commit-line {
            width: 2px;
            flex: 1;
            background: var(--border-color);
            min-height: 20px;
        }

        .commit-avatar {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-green));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .commit-details {
            flex: 1;
            min-width: 0;
        }

        .commit-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }

        .commit-message {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 8px;
            line-height: 1.4;
            color: var(--text-primary);
        }

        .commit-meta {
            display: flex;
            align-items: center;
            gap: 12px;
            margin: 8px 0;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .commit-date {
            color: var(--text-secondary);
        }
        
        .commit-version {
            background: var(--accent-blue);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .commit-hash {
            font-family: 'SF Mono', Monaco, monospace;
            background: var(--bg-tertiary);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.8rem;
        }

        .commit-stats {
            display: flex;
            gap: 12px;
            margin-top: 8px;
        }

        .commit-stat {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .commit-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            opacity: 0;
            transition: opacity 0.2s ease;
        }
        
        .commit-item:hover .commit-actions {
            opacity: 1;
        }

        .commit-action-btn {
            background: rgba(120, 120, 128, 0.16);
            color: var(--text-primary);
            border: none;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 0.8rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .commit-action-btn:hover {
            background: var(--accent-blue);
            color: white;
            transform: scale(1.05);
        }

        .traffic-lights {
            display: flex;
            gap: 8px;
            -webkit-app-region: no-drag;
        }

        .traffic-light {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.2), 0 1px 2px rgba(255, 255, 255, 0.1);
        }
        
        .traffic-light::before {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            right: 2px;
            bottom: 2px;
            border-radius: 50%;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.3), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .traffic-light:hover::before {
            opacity: 1;
        }

        .traffic-light:hover {
            transform: scale(1.15);
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3), 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .traffic-light:active {
            transform: scale(0.95);
        }

        .close { 
            background: linear-gradient(135deg, #ff6b5a, #ff5f57);
            border: 1px solid #e04b3d;
        }
        .minimize { 
            background: linear-gradient(135deg, #ffcb2e, #ffbd2e);
            border: 1px solid #e6a824;
        }
        .maximize { 
            background: linear-gradient(135deg, #2dd648, #28ca42);
            border: 1px solid #20a934;
        }

        /* Î™®Îã¨ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            animation: fadeIn 0.25s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-overlay.show {
            display: flex;
        }

        .modal {
            background: rgba(28, 28, 30, 0.95);
            border: 0.5px solid var(--border-color);
            border-radius: 20px;
            padding: 32px;
            max-width: 520px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(40px);
            -webkit-backdrop-filter: blur(40px);
            animation: modalSlideIn 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        /* Commit Dialog Styles */
        .commit-dialog {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }
        
        .commit-header {
            text-align: center;
        }
        
        .commit-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
        }
        
        .commit-subtitle {
            font-size: 0.95rem;
            color: var(--text-secondary);
        }
        
        .commit-files-preview {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 16px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .commit-file-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 0;
            border-bottom: 0.5px solid var(--border-color);
        }
        
        .commit-file-item:last-child {
            border-bottom: none;
        }
        
        .commit-file-status {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            flex-shrink: 0;
        }
        
        .commit-file-status.modified {
            background: #FF9F0A;
        }
        
        .commit-file-status.added {
            background: #30D158;
        }
        
        .commit-file-status.deleted {
            background: #FF453A;
        }
        
        .commit-file-status.untracked {
            background: #64D2FF;
        }
        
        .commit-file-name {
            font-size: 0.9rem;
            color: var(--text-primary);
            font-family: 'SF Mono', Monaco, monospace;
        }
        
        .commit-file-more {
            text-align: center;
            padding: 12px;
            color: var(--text-secondary);
            font-size: 0.85rem;
            font-style: italic;
        }
        
        .commit-message-section {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .commit-message-label {
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-primary);
        }
        
        .commit-message-input {
            width: 100%;
            height: 80px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 12px;
            font-size: 14px;
            font-family: inherit;
            resize: vertical;
            min-height: 80px;
            color: var(--text-primary) !important;
            transition: border-color 0.2s ease;
        }
        
        .commit-message-input:focus {
            outline: none;
            border-color: #007aff;
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
        }

/* Î™®Îã¨ */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.4);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    animation: fadeIn 0.25s ease;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.modal-overlay.show {
    display: flex;
}

.modal {
    background: rgba(28, 28, 30, 0.95);
    border: 0.5px solid var(--border-color);
    border-radius: 20px;
    padding: 32px;
    max-width: 520px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(40px);
    -webkit-backdrop-filter: blur(40px);
    animation: modalSlideIn 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* Commit Dialog Styles */
.commit-dialog {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

.commit-header {
    text-align: center;
}

.commit-title {
    font-size: 1.3rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 8px;
}

.commit-subtitle {
    font-size: 0.95rem;
    color: var(--text-secondary);
}

.commit-files-preview {
    background: var(--bg-secondary);
    border-radius: 12px;
    padding: 16px;
    max-height: 200px;
    overflow-y: auto;
}

.commit-file-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 8px 0;
    border-bottom: 0.5px solid var(--border-color);
}

.commit-file-item:last-child {
    border-bottom: none;
}

.commit-file-status {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    flex-shrink: 0;
}

.commit-file-status.modified {
    background: #FF9F0A;
}

.commit-file-status.added {
    background: #30D158;
}

.commit-file-status.deleted {
    background: #FF453A;
}

.commit-file-status.untracked {
    background: #64D2FF;
}

.commit-file-name {
    font-size: 0.9rem;
    color: var(--text-primary);
    font-family: 'SF Mono', Monaco, monospace;
}

.commit-file-more {
    text-align: center;
    padding: 12px;
    color: var(--text-secondary);
    font-size: 0.85rem;
    font-style: italic;
}

.commit-message-section {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.commit-message-label {
    font-size: 0.9rem;
    font-weight: 500;
    color: var(--text-primary);
}

.commit-message-input {
    width: 100%;
    height: 80px;
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 12px;
    color: var(--text-primary);
    resize: vertical;
    font-family: inherit;
    font-size: 0.9rem;
    transition: border-color 0.2s ease;
}

.commit-message-input:focus {
    outline: none;
    border-color: #007aff;
    box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
}

@keyframes modalSlideIn {
    from { 
        transform: translateY(-20px) scale(0.95); 
        opacity: 0; 
    }
    to { 
        transform: translateY(0) scale(1); 
        opacity: 1; 
    }
}

.modal-header {
    margin-bottom: 20px;
}

.modal-title {
    font-size: 1.3rem;
    font-weight: 500;
    margin-bottom: 8px;
}

.modal-subtitle {
    color: var(--text-secondary);
}

.modal-body {
    margin-bottom: 24px;
}

.modal-footer {
    display: flex;
    gap: 12px;
    justify-content: flex-end;
    margin-top: 24px;
}

.modal-footer .btn {
    min-width: 100px;
    font-weight: 600;
    font-size: 0.95rem;
}

/* Î≤ÑÌäº Ïä§ÌÉÄÏùº - Í∞ïÏ†ú Ï†ÅÏö© */
button.btn, .btn {
    padding: 20px 32px !important;
    border: none !important;
    border-radius: 12px !important;
    cursor: pointer !important;
    font-size: 1.1rem !important;
    font-weight: 600 !important;
    transition: all 0.2s ease !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 10px !important;
    text-decoration: none !important;
    white-space: nowrap !important;
    min-height: 56px !important;
    background: #1a1a1a !important;
    color: #ffffff !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
}

button.btn:hover, .btn:hover {
    background: #333333 !important;
    transform: translateY(-3px) !important;
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4) !important;
}

button.btn:active, .btn:active {
    transform: translateY(0) scale(0.98) !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2) !important;
}

button.btn-primary, .btn-primary {
    background: #007aff !important;
    color: #ffffff !important;
    box-shadow: 0 4px 12px rgba(0, 122, 255, 0.5) !important;
}

button.btn-primary:hover, .btn-primary:hover {
    background: #0056b3 !important;
    transform: translateY(-3px) !important;
    box-shadow: 0 6px 16px rgba(0, 122, 255, 0.6) !important;
}

button.btn-secondary, .btn-secondary {
    background: #1a1a1a !important;
    color: #ffffff !important;
    border: 2px solid #444444 !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25) !important;
}

button.btn-secondary:hover, .btn-secondary:hover {
    background: #333333 !important;
    border-color: #666666 !important;
    transform: translateY(-3px) !important;
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.35) !important;
}

.toast-container {
    position: fixed;
    top: 60px;
    right: 20px;
    z-index: 2000;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.toast {
    background: rgba(28, 28, 30, 0.9);
    border: 0.5px solid var(--border-color);
    border-radius: 16px;
    padding: 16px 20px;
    display: flex;
    align-items: center;
    gap: 12px;
    min-width: 320px;
    animation: toastSlideIn 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(40px);
    -webkit-backdrop-filter: blur(40px);
    position: relative;
}

.toast::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border-radius: 16px;
    background: linear-gradient(135deg, rgba(255,255,255,0.1), transparent);
    pointer-events: none;
}

.toast.success { border-left: 4px solid var(--accent-green); }
.toast.error { border-left: 4px solid var(--accent-red); }
.toast.warning { border-left: 4px solid var(--accent-orange); }

@keyframes toastSlideIn {
    from { 
        transform: translateX(100%) scale(0.9); 
        opacity: 0; 
    }
    to { 
        transform: translateX(0) scale(1); 
        opacity: 1; 
    }
}

/* Haptic feedback simulation */
.haptic-light {
    animation: hapticLight 0.1s ease;
}

.haptic-medium {
    animation: hapticMedium 0.15s ease;
}

@keyframes hapticLight {
    0% { transform: scale(1); }
    50% { transform: scale(0.98); }
    100% { transform: scale(1); }
}

@keyframes hapticMedium {
    0% { transform: scale(1); }
    25% { transform: scale(0.95); }
    75% { transform: scale(1.02); }
    100% { transform: scale(1); }
}

/* Î∏åÎûúÏπò ÏãúÍ∞ÅÌôî */
.branch-graph {
    height: 300px;
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    margin-bottom: 20px;
    position: relative;
    overflow: hidden;
}

.branch-node {
    position: absolute;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: var(--accent-blue);
    border: 2px solid var(--bg-primary);
}

.branch-line {
    position: absolute;
    height: 2px;
    background: var(--accent-blue);
}

/* Î∞òÏùëÌòï */
@media (max-width: 768px) {
    .workspace-content {
        flex-direction: column;
    }
    
    .sidebar {
        width: 100%;
        height: auto;
    }
    
    .terminal-panel {
        height: 150px;
    }
}

/* Ïù¥ÎØ∏ÏßÄ ÌîÑÎ¶¨Î∑∞ Î™®Îã¨ */
.image-preview-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 2000;
    cursor: pointer;
}

.image-preview-modal.show {
    display: flex;
}

.image-preview-content {
    max-width: 90%;
    max-height: 90%;
    position: relative;
}

.image-preview-img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    border-radius: 8px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
}

.image-preview-info {
    position: absolute;
    bottom: -40px;
    left: 0;
    right: 0;
    text-align: center;
    color: white;
    font-size: 0.9rem;
}

.image-preview-close {
    position: absolute;
    top: 20px;
    right: 20px;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    cursor: pointer;
    font-size: 1.2rem;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Ïà®ÍπÄ ÌÅ¥ÎûòÏä§ */
.hidden {
    display: none;
}
</style>
</head>
<body data-theme="dark">
    <!-- Î°úÎî© ÌôîÎ©¥ -->
    <div class="splash-screen" id="splashScreen">
        <div class="splash-logo">
            <div class="splash-logo-icon"></div>
            <div class="splash-logo-text">DGit</div>
        </div>
        <div class="splash-loading">
            <span>Î°úÎî© Ï§ë</span>
            <div class="loading-dots">
                <div class="loading-dot"></div>
                <div class="loading-dot"></div>
                <div class="loading-dot"></div>
            </div>
        </div>
    </div>

    <!-- Î©îÏù∏ Ïï± -->
    <div class="app-container" id="appContainer">
        <!-- ÌÉÄÏù¥ÌãÄÎ∞î -->
        <div class="title-bar">
            <div class="title-text" id="titleText">DGit MAC</div>
            <button class="theme-toggle" onclick="toggleTheme()">
                <span id="themeIcon">üåô</span>
            </button>
        </div>

        <!-- Ìôà ÌôîÎ©¥ -->
        <div class="home-screen" id="homeScreen">
            <div class="home-title">
                <span class="home-title-text">DGit</span>
            </div>
            <div class="home-subtitle">ÎîîÏûêÏù∏ ÌååÏùº Ï†ÑÏö© Î≤ÑÏ†Ñ Í¥ÄÎ¶¨ ÏãúÏä§ÌÖú</div>
            <div class="home-buttons">
                <div class="home-button" onclick="selectNewProject()">
                    <div class="home-button-icon new-project">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                        </svg>
                    </div>
                    <div class="home-button-text">
                        <div class="home-button-title">ÏÉà ÌîÑÎ°úÏ†ùÌä∏ ÏÑ†ÌÉù</div>
                        <div class="home-button-desc">ÏÉàÎ°úÏö¥ ÎîîÏûêÏù∏ ÌîÑÎ°úÏ†ùÌä∏Î•º ÏãúÏûëÌï©ÎãàÎã§</div>
                    </div>
                </div>
                <div class="home-button" onclick="openCurrentProject()">
                    <div class="home-button-icon current-project">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M8 5v14l11-7z"/>
                        </svg>
                    </div>
                    <div class="home-button-text">
                        <div class="home-button-title">ÏßÑÌñâ Ï§ëÏù∏ ÌîÑÎ°úÏ†ùÌä∏</div>
                        <div class="home-button-desc">Í∞ÄÏû• ÏµúÍ∑º ÌîÑÎ°úÏ†ùÌä∏Î•º Î∞îÎ°ú ÏóΩÎãàÎã§</div>
                    </div>
                </div>
                <div class="home-button" onclick="showRecentProjects()">
                    <div class="home-button-icon recent-projects">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.7L16.2,16.2Z"/>
                        </svg>
                    </div>
                    <div class="home-button-text">
                        <div class="home-button-title">ÏßÄÎÇú ÌîÑÎ°úÏ†ùÌä∏</div>
                        <div class="home-button-desc">ÏµúÍ∑º ÏûëÏóÖÌïú ÌîÑÎ°úÏ†ùÌä∏ Î™©Î°ùÏóêÏÑú ÏÑ†ÌÉù</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÏûëÏóÖ Í≥µÍ∞Ñ -->
        <div class="workspace" id="workspace">
            <!-- Ìó§Îçî -->
            <div class="workspace-header">
                <button class="btn btn-secondary" onclick="goHome()" style="padding: 12px 20px !important; background: #1a1a1a !important; color: #ffffff !important; font-size: 0.95rem !important; min-height: 40px !important; border-radius: 8px !important; border: none !important; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important; display: inline-flex !important; align-items: center !important; gap: 8px !important; transition: all 0.2s ease !important;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 16px rgba(0, 0, 0, 0.4)'; this.style.background='#2a2a2a'" onmouseout="this.style.transform='translateY(0px)'; this.style.boxShadow='0 2px 8px rgba(0, 0, 0, 0.3)'; this.style.background='#1a1a1a'">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L8.354 1.146zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5z"/>
                    </svg>
                    Ìôà
                </button>
                <div class="project-info">
                    <h2 id="projectName">ÌîÑÎ°úÏ†ùÌä∏Î™Ö</h2>
                    <div class="project-path" id="projectPath">/path/to/project</div>
                </div>
            </div>

            <!-- ÏΩòÌÖêÏ∏† ÏòÅÏó≠ -->
            <div class="workspace-content">
                <!-- ÏÇ¨Ïù¥ÎìúÎ∞î -->
                <div class="sidebar">
                    <ul class="sidebar-nav">
                        <li><a href="#" onclick="showContent('files')" class="nav-link active" id="filesNav">
                            <span class="nav-icon">üìÑ</span> ÌååÏùº
                        </a></li>
                        <li><a href="#" onclick="showContent('versions')" class="nav-link" id="versionsNav">
                            <span class="nav-icon">‚è±</span> ÌûàÏä§ÌÜ†Î¶¨
                        </a></li>
                        <li><a href="#" onclick="showContent('branches')" class="nav-link" id="branchesNav">
                            <span class="nav-icon">‚è∏</span> Î∏åÎûúÏπò
                        </a></li>
                        <li><a href="#" onclick="showContent('settings')" class="nav-link" id="settingsNav">
                            <span class="nav-icon">‚öô</span> ÏÑ§Ï†ï
                        </a></li>
                    </ul>
                </div>

                <!-- Î©îÏù∏ ÏΩòÌÖêÏ∏† -->
                <div class="main-content">
                    <div class="content-area">
                        <!-- ÌååÏùº Î™©Î°ù -->
                        <div id="filesContent" class="content-section active">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                <h3>ÌîÑÎ°úÏ†ùÌä∏ ÌååÏùº</h3>
                                <div class="action-buttons">
                                    <button class="btn btn-secondary" onclick="changeProject()" style="padding: 12px 20px !important; background: #1a1a1a !important; color: #ffffff !important; font-size: 0.95rem !important; min-height: 40px !important; border-radius: 8px !important; border: none !important; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important; transition: all 0.2s ease !important;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 16px rgba(0, 0, 0, 0.4)'; this.style.background='#2a2a2a'" onmouseout="this.style.transform='translateY(0px)'; this.style.boxShadow='0 2px 8px rgba(0, 0, 0, 0.3)'; this.style.background='#1a1a1a'">
                                        ÌîÑÎ°úÏ†ùÌä∏ Î≥ÄÍ≤Ω
                                    </button>
                                    <button class="btn btn-secondary" onclick="scanProject()" style="padding: 12px 20px !important; background: #1a1a1a !important; color: #ffffff !important; font-size: 0.95rem !important; min-height: 40px !important; border-radius: 8px !important; border: none !important; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important; transition: all 0.2s ease !important;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 16px rgba(0, 0, 0, 0.4)'; this.style.background='#2a2a2a'" onmouseout="this.style.transform='translateY(0px)'; this.style.boxShadow='0 2px 8px rgba(0, 0, 0, 0.3)'; this.style.background='#1a1a1a'">
                                        Ïä§Ï∫î
                                    </button>
                                    <button class="btn btn-secondary" onclick="showInFinder()" style="padding: 12px 20px !important; background: #1a1a1a !important; color: #ffffff !important; font-size: 0.95rem !important; min-height: 40px !important; border-radius: 8px !important; border: none !important; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important; transition: all 0.2s ease !important;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 16px rgba(0, 0, 0, 0.4)'; this.style.background='#2a2a2a'" onmouseout="this.style.transform='translateY(0px)'; this.style.boxShadow='0 2px 8px rgba(0, 0, 0, 0.3)'; this.style.background='#1a1a1a'">
                                        FinderÏóêÏÑú Î≥¥Í∏∞
                                    </button>
                                    <button class="btn btn-primary" onclick="commitChanges()" style="padding: 12px 20px !important; background: #007aff !important; color: #ffffff !important; font-size: 0.95rem !important; min-height: 40px !important; border-radius: 8px !important; border: none !important; box-shadow: 0 2px 8px rgba(0, 122, 255, 0.5) !important; transition: all 0.2s ease !important;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 16px rgba(0, 122, 255, 0.7)'; this.style.background='#3394ff'" onmouseout="this.style.transform='translateY(0px)'; this.style.boxShadow='0 2px 8px rgba(0, 122, 255, 0.5)'; this.style.background='#007aff'">
                                        Î≥ÄÍ≤ΩÏÇ¨Ìï≠ Ïª§Î∞ã
                                    </button>
                                </div>
                            </div>
                            <div class="file-list" id="fileList">
                                <!-- ÌååÏùº Ìï≠Î™©Îì§Ïù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê©ÎãàÎã§ -->
                            </div>
                        </div>

                        <!-- Î≤ÑÏ†Ñ ÌûàÏä§ÌÜ†Î¶¨ -->
                        <div id="versionsContent" class="content-section hidden">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                <h3>Ïª§Î∞ã ÌûàÏä§ÌÜ†Î¶¨</h3>
                                <div style="display: flex; gap: 12px;">
                                    <button class="btn btn-secondary" onclick="addAllFiles()" style="padding: 12px 20px !important; background: #1a1a1a !important; color: #ffffff !important; font-size: 0.95rem !important; min-height: 40px !important; border-radius: 8px !important; border: none !important; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important; transition: all 0.2s ease !important;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 16px rgba(0, 0, 0, 0.4)'; this.style.background='#2a2a2a'" onmouseout="this.style.transform='translateY(0px)'; this.style.boxShadow='0 2px 8px rgba(0, 0, 0, 0.3)'; this.style.background='#1a1a1a'">
                                        Î™®Îì† ÌååÏùº Ï∂îÍ∞Ä
                                    </button>
                                    <button class="btn btn-secondary" onclick="restoreFiles()" style="padding: 12px 20px !important; background: #1a1a1a !important; color: #ffffff !important; font-size: 0.95rem !important; min-height: 40px !important; border-radius: 8px !important; border: none !important; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important; transition: all 0.2s ease !important;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 16px rgba(0, 0, 0, 0.4)'; this.style.background='#2a2a2a'" onmouseout="this.style.transform='translateY(0px)'; this.style.boxShadow='0 2px 8px rgba(0, 0, 0, 0.3)'; this.style.background='#1a1a1a'">
                                        Î≥µÏõê
                                    </button>
                                </div>
                            </div>
                            <div class="commit-list" id="commitList">
                                <!-- Ïª§Î∞ã Ìï≠Î™©Îì§Ïù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê©ÎãàÎã§ -->
                            </div>
                        </div>

                        <!-- Î∏åÎûúÏπò Í¥ÄÎ¶¨ -->
                        <div id="branchesContent" class="content-section hidden">
                            <h3 style="margin-bottom: 20px;">Î∏åÎûúÏπò Í¥ÄÎ¶¨</h3>
                            <div class="branch-graph" id="branchGraph"></div>
                            <button class="btn btn-primary" onclick="createBranch()" style="padding: 12px 20px !important; background: #007aff !important; color: #ffffff !important; font-size: 0.95rem !important; min-height: 40px !important; border-radius: 8px !important; border: none !important; box-shadow: 0 2px 8px rgba(0, 122, 255, 0.5) !important; transition: all 0.2s ease !important;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 16px rgba(0, 122, 255, 0.7)'; this.style.background='#3394ff'" onmouseout="this.style.transform='translateY(0px)'; this.style.boxShadow='0 2px 8px rgba(0, 122, 255, 0.5)'; this.style.background='#007aff'">
                ÏÉà Î∏åÎûúÏπò ÏÉùÏÑ±
            </button>
                        </div>


                        <!-- ÏÑ§Ï†ï -->
                        <div id="settingsContent" class="content-section hidden">
                            <h3 style="margin-bottom: 20px;">ÌôòÍ≤ΩÏÑ§Ï†ï</h3>
                            <div style="margin-bottom: 20px;">
                                <h4 style="margin-bottom: 10px;">Ï†ïÎ≥¥</h4>
                                <p style="color: var(--text-secondary); margin-bottom: 8px;">Î≤ÑÏ†Ñ: 1.0.0</p>
                                <p style="color: var(--text-secondary); margin-bottom: 8px;">Ï†úÏûë: 3pxTeam</p>
                            </div>
                            <div style="margin-bottom: 20px;">
                                <h4 style="margin-bottom: 10px;">ÌÖåÎßà</h4>
                                <button class="btn btn-secondary" onclick="toggleTheme()" style="padding: 12px 20px !important; background: #1a1a1a !important; color: #ffffff !important; font-size: 0.95rem !important; min-height: 40px !important; border-radius: 8px !important; border: none !important; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important; transition: all 0.2s ease !important;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 16px rgba(0, 0, 0, 0.4)'; this.style.background='#2a2a2a'" onmouseout="this.style.transform='translateY(0px)'; this.style.boxShadow='0 2px 8px rgba(0, 0, 0, 0.3)'; this.style.background='#1a1a1a'">
                    <span id="themeText">ÎùºÏù¥Ìä∏ Î™®ÎìúÎ°ú Ï†ÑÌôò</span>
                </button>
                            </div>
                            <div>
                                <h4 style="margin-bottom: 10px;">ÏïåÎ¶º ÏÑ§Ï†ï</h4>
                                <div style="display: flex; align-items: center; justify-content: space-between; padding: 16px; background: var(--bg-secondary); border-radius: 8px; margin-bottom: 12px;">
                                    <div>
                                        <div style="font-weight: 500; margin-bottom: 4px;">ÏãúÏä§ÌÖú ÏïåÎ¶º</div>
                                        <div style="font-size: 0.9rem; color: var(--text-secondary);">Ïª§Î∞ã, Î≥µÏõê Îì±Ïùò ÏûëÏóÖ ÏôÑÎ£å Ïãú ÏïåÎ¶ºÏùÑ ÌëúÏãúÌï©ÎãàÎã§</div>
                                    </div>
                                    <button class="btn btn-primary" id="notificationToggle" onclick="toggleNotifications()" style="padding: 12px 20px !important; background: #007aff !important; color: #ffffff !important; font-size: 0.95rem !important; min-height: 40px !important; border-radius: 8px !important; border: none !important; box-shadow: 0 2px 8px rgba(0, 122, 255, 0.5) !important; transition: all 0.2s ease !important;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 16px rgba(0, 122, 255, 0.7)'; this.style.background='#3394ff'" onmouseout="this.style.transform='translateY(0px)'; this.style.boxShadow='0 2px 8px rgba(0, 122, 255, 0.5)'; this.style.background='#007aff'">
                        <span id="notificationToggleText">ÏºúÏßê</span>
                    </button>
                                </div>
                                <div style="display: flex; align-items: center; justify-content: space-between; padding: 16px; background: var(--bg-secondary); border-radius: 8px;">
                                    <div>
                                        <div style="font-weight: 500; margin-bottom: 4px;">ÏÇ¨Ïö¥Îìú ÏïåÎ¶º</div>
                                        <div style="font-size: 0.9rem; color: var(--text-secondary);">ÏïåÎ¶º Ïãú ÏãúÏä§ÌÖú ÏÇ¨Ïö¥ÎìúÎ•º Ïû¨ÏÉùÌï©ÎãàÎã§</div>
                                    </div>
                                    <button class="btn btn-secondary" onclick="showToast('ÏÇ¨Ïö¥Îìú ÏÑ§Ï†ïÏùÄ ÏãúÏä§ÌÖú ÏÑ§Ï†ïÏóêÏÑú Î≥ÄÍ≤ΩÌï† Ïàò ÏûàÏäµÎãàÎã§', 'info')" style="padding: 12px 20px !important; background: #1a1a1a !important; color: #ffffff !important; font-size: 0.95rem !important; min-height: 40px !important; border-radius: 8px !important; border: none !important; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important; transition: all 0.2s ease !important;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 16px rgba(0, 0, 0, 0.4)'; this.style.background='#2a2a2a'" onmouseout="this.style.transform='translateY(0px)'; this.style.boxShadow='0 2px 8px rgba(0, 0, 0, 0.3)'; this.style.background='#1a1a1a'">
                        ÏãúÏä§ÌÖú ÏÑ§Ï†ï
                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ÌÑ∞ÎØ∏ÎÑê Ìå®ÎÑê -->
                    <div class="terminal-panel" id="terminalPanel">
                        <div class="terminal-header">
                            <div class="terminal-tabs">
                                <div class="terminal-tab active" onclick="showTerminalTab('log')">Ïª§Î∞ã Î°úÍ∑∏</div>
                                <div class="terminal-tab" onclick="showTerminalTab('status')">ÏÉÅÌÉú</div>
                            </div>
                            <div class="terminal-controls">
                                <button class="terminal-control-btn" onclick="toggleTerminal()" id="terminalToggleBtn" title="ÌÑ∞ÎØ∏ÎÑê Ïà®Í∏∞Í∏∞">
                                    ‚úï
                                </button>
                            </div>
                        </div>
                        <div class="terminal-content" id="terminalContent">
                            <div id="terminalLog">Ïª§Î∞ã Î°úÍ∑∏Í∞Ä Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§...</div>
                            <div id="terminalStatus" class="hidden">ÏÉÅÌÉú Ï†ïÎ≥¥Í∞Ä Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Î™®Îã¨Îì§ -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title" id="modalTitle">Î™®Îã¨ Ï†úÎ™©</div>
                <div class="modal-subtitle" id="modalSubtitle">Î™®Îã¨ Î∂ÄÏ†úÎ™©</div>
            </div>
            <div class="modal-body" id="modalBody">
                Î™®Îã¨ ÎÇ¥Ïö©
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal()" style="padding: 12px 20px !important; background: #1a1a1a !important; color: #ffffff !important; font-size: 0.95rem !important; min-height: 40px !important; border-radius: 8px !important; border: none !important; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important; transition: all 0.2s ease !important;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 16px rgba(0, 0, 0, 0.4)'" onmouseout="this.style.transform='translateY(0px)'; this.style.boxShadow='0 2px 8px rgba(0, 0, 0, 0.3)'">Ï∑®ÏÜå</button>
                <button class="btn btn-primary" onclick="confirmModal()" style="padding: 12px 20px !important; background: #007aff !important; color: #ffffff !important; font-size: 0.95rem !important; min-height: 40px !important; border-radius: 8px !important; border: none !important; box-shadow: 0 2px 8px rgba(0, 122, 255, 0.5) !important; transition: all 0.2s ease !important;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 16px rgba(0, 122, 255, 0.7)'" onmouseout="this.style.transform='translateY(0px)'; this.style.boxShadow='0 2px 8px rgba(0, 122, 255, 0.5)'">ÌôïÏù∏</button>
            </div>
        </div>
    </div>

    <!-- ÌÜ†Ïä§Ìä∏ Ïª®ÌÖåÏù¥ÎÑà -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Ïù¥ÎØ∏ÏßÄ ÌîÑÎ¶¨Î∑∞ Î™®Îã¨ -->
    <div class="image-preview-modal" id="imagePreviewModal" onclick="closeImagePreview()">
        <button class="image-preview-close" onclick="closeImagePreview()">√ó</button>
        <div class="image-preview-content" onclick="event.stopPropagation()">
            <img class="image-preview-img" id="imagePreviewImg" src="" alt="">
            <div class="image-preview-info" id="imagePreviewInfo"></div>
        </div>
    </div>

    <script>
        // Ï†ÑÏó≠ Î≥ÄÏàò
        let currentProject = null;
        let currentTheme = 'dark';
        let activeContent = 'files';
        let notificationsEnabled = true;

        // Ï¥àÍ∏∞Ìôî
        document.addEventListener('DOMContentLoaded', function() {
            // Î°úÎî© ÌôîÎ©¥ ÌëúÏãú ÌõÑ Î©îÏù∏ Ïï±ÏúºÎ°ú Ï†ÑÌôò
            setTimeout(() => {
                document.getElementById('splashScreen').style.display = 'none';
                document.getElementById('appContainer').classList.add('visible');
                initializeApp();
            }, 2000);
        });

        // ÌîÑÎ°úÏ†ùÌä∏ Îç∞Ïù¥ÌÑ∞ Î°úÎìú
        async function loadProjectData() {
            if (!currentProject) return;
            
            try {
                // ÌîÑÎ°úÏ†ùÌä∏ ÌååÏùº Ïä§Ï∫î
                await loadProjectFiles();
                
                // Ïª§Î∞ã ÌûàÏä§ÌÜ†Î¶¨ Î°úÎìú
                await loadCommitHistory();
                
                // DGit ÏÉÅÌÉú ÌôïÏù∏
                await updateProjectStatus();
                
            } catch (error) {
                console.error('ÌîÑÎ°úÏ†ùÌä∏ Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ïã§Ìå®:', error);
                showToast('ÌîÑÎ°úÏ†ùÌä∏ Îç∞Ïù¥ÌÑ∞Î•º Î°úÎìúÌïòÎäî Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§', 'error');
            }
        }

        // ÌîÑÎ°úÏ†ùÌä∏ ÌååÏùº Î°úÎìú
        async function loadProjectFiles() {
            if (!currentProject) return;
            
            try {
                const result = await window.electron.scanDirectory(currentProject.path);
                
                if (result.success) {
                    const files = result.files.map(file => ({
                        name: file.name,
                        type: file.type,
                        size: formatFileSize(file.size),
                        modified: formatDate(file.modified),
                        status: 'unknown', // ÏÉÅÌÉúÎäî Î≥ÑÎèÑÎ°ú ÌôïÏù∏
                        path: file.path
                    }));
                    
                    // DGit ÏÉÅÌÉúÎ°ú ÌååÏùº ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
                    await updateFileStatuses(files);
                    renderFiles(files);
                } else {
                    showToast('ÌååÏùºÏùÑ Ïä§Ï∫îÌï† Ïàò ÏóÜÏäµÎãàÎã§', 'error');
                }
            } catch (error) {
                console.error('ÌååÏùº Î°úÎìú Ïã§Ìå®:', error);
                showToast('ÌååÏùº Î°úÎìú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§', 'error');
            }
        }

        // Ïª§Î∞ã ÌûàÏä§ÌÜ†Î¶¨ Î°úÎìú
        async function loadCommitHistory() {
            if (!currentProject) return;
            
            try {
                const result = await window.electron.dgit.log(currentProject.path, 10);
                
                if (result.success) {
                    const commits = parseCommitLog(result.output);
                    renderCommits(commits);
                } else {
                    // Ï†ÄÏû•ÏÜåÍ∞Ä Ï¥àÍ∏∞ÌôîÎêòÏßÄ ÏïäÏùÄ Í≤ΩÏö∞
                    renderCommits([]);
                }
            } catch (error) {
                console.error('Ïª§Î∞ã ÌûàÏä§ÌÜ†Î¶¨ Î°úÎìú Ïã§Ìå®:', error);
                renderCommits([]);
            }
        }

        // ÌîÑÎ°úÏ†ùÌä∏ ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
        async function updateProjectStatus() {
            if (!currentProject) return;
            
            try {
                const result = await window.electron.dgit.status(currentProject.path);
                
                if (result.success) {
                    updateTerminalStatus(result.output);
                } else {
                    updateTerminalStatus('DGit Ï†ÄÏû•ÏÜåÍ∞Ä Ï¥àÍ∏∞ÌôîÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§.');
                }
            } catch (error) {
                console.error('ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏ Ïã§Ìå®:', error);
                updateTerminalStatus('ÏÉÅÌÉúÎ•º ÌôïÏù∏Ìï† Ïàò ÏóÜÏäµÎãàÎã§.');
            }
        }

        // ÌååÏùº Î™©Î°ù Î†åÎçîÎßÅ
        function renderFiles(files) {
            const fileList = document.getElementById('fileList');
            fileList.innerHTML = files.map(file => {
                const isImageFile = isPreviewableImage(file.type);
                const thumbnailClass = isImageFile ? 'file-thumbnail has-preview' : 'file-thumbnail';
                const thumbnailContent = isImageFile ? '' : getFileIcon(file.type);
                const thumbnailStyle = isImageFile ? `background-image: url('file://${file.path}')` : '';
                
                return `
                    <div class="file-item">
                        <div class="${thumbnailClass}" 
                             style="${thumbnailStyle}"
                             onclick="${isImageFile ? `showImagePreview('${file.path}', '${file.name}')` : ''}"
                             title="${isImageFile ? 'ÌÅ¥Î¶≠ÌïòÏó¨ ÎØ∏Î¶¨Î≥¥Í∏∞' : ''}">
                            ${thumbnailContent}
                        </div>
                        <div class="file-info" onclick="selectFile('${file.name}')">
                            <div class="file-name">${file.name}</div>
                            <div class="file-details">${file.size} ‚Ä¢ ${file.modified}</div>
                        </div>
                        <div class="file-status" style="background: ${getStatusColor(file.status)}"></div>
                    </div>
                `;
            }).join('');
        }

        // Ïù¥ÎØ∏ÏßÄ ÌååÏùº ÎØ∏Î¶¨Î≥¥Í∏∞ Í∞ÄÎä• Ïó¨Î∂Ä ÌôïÏù∏
        function isPreviewableImage(type) {
            const previewableTypes = ['png', 'jpg', 'jpeg', 'gif', 'svg', 'webp'];
            return previewableTypes.includes(type.toLowerCase());
        }

        // Ïù¥ÎØ∏ÏßÄ ÎØ∏Î¶¨Î≥¥Í∏∞ ÌëúÏãú
        function showImagePreview(imagePath, fileName) {
            const modal = document.getElementById('imagePreviewModal');
            const img = document.getElementById('imagePreviewImg');
            const info = document.getElementById('imagePreviewInfo');
            
            img.src = `file://${imagePath}`;
            info.textContent = fileName;
            modal.classList.add('show');
        }

        // Ïù¥ÎØ∏ÏßÄ ÎØ∏Î¶¨Î≥¥Í∏∞ Îã´Í∏∞
        function closeImagePreview() {
            const modal = document.getElementById('imagePreviewModal');
            modal.classList.remove('show');
        }

        // ÌååÏùº ÏÑ†ÌÉù
        function selectFile(fileName) {
            console.log('ÌååÏùº ÏÑ†ÌÉù:', fileName);
            // ÌååÏùº ÏÑ†ÌÉù Î°úÏßÅ Íµ¨ÌòÑ
        }

        // Ïª§Î∞ã Î™©Î°ù Î†åÎçîÎßÅ
        function renderCommits(commits) {
            const commitList = document.getElementById('commitList');
            
            if (commits.length === 0) {
                commitList.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: var(--text-secondary);">
                        <div style="font-size: 3rem; margin-bottom: 16px;">üìù</div>
                        <div style="font-size: 1.1rem; margin-bottom: 8px;">ÏïÑÏßÅ Ïª§Î∞ãÏù¥ ÏóÜÏäµÎãàÎã§</div>
                        <div style="font-size: 0.9rem;">Ï≤´ Î≤àÏß∏ Ïª§Î∞ãÏùÑ ÎßåÎì§Ïñ¥Î≥¥ÏÑ∏Ïöî!</div>
                    </div>
                `;
                return;
            }
            
            commitList.innerHTML = commits.map((commit, index) => {
                const authorInitial = commit.author ? commit.author.charAt(0).toUpperCase() : 'U';
                const isLast = index === commits.length - 1;
                
                return `
                    <div class="commit-item" onclick="viewCommit('${commit.hash}')">
                        <div class="commit-timeline">
                            <div class="commit-dot"></div>
                            ${!isLast ? '<div class="commit-line"></div>' : ''}
                        </div>
                        <div class="commit-avatar">${authorInitial}</div>
                        <div class="commit-details">
                            <div class="commit-message">${commit.message || 'Ïª§Î∞ã Î©îÏãúÏßÄ ÏóÜÏùå'}</div>
                            <div class="commit-meta">
                                <span class="commit-date">${commit.date || 'ÎÇ†Ïßú ÏóÜÏùå'}</span>
                                ${commit.version ? `<span class="commit-version">v${commit.version}</span>` : ''}
                            </div>
                            <div class="commit-actions">
                                <button class="commit-action-btn" onclick="event.stopPropagation(); restoreToCommit('${commit.hash}')">
                                    Î≥µÏõê
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // ÌååÏùº ÏïÑÏù¥ÏΩò Í∞ÄÏ†∏Ïò§Í∏∞
        function getFileIcon(type) {
            const icons = {
                'psd': 'üé®',
                'ai': 'üñåÔ∏è',
                'sketch': '‚úèÔ∏è',
                'figma': 'üéØ',
                'xd': 'üíú',
                'png': 'üñºÔ∏è',
                'jpg': 'üì∏',
                'svg': 'üé≠'
            };
            return icons[type] || 'üìÑ';
        }

        // ÌååÏùº ÏÉÅÌÉú ÏÉâÏÉÅ Í∞ÄÏ†∏Ïò§Í∏∞
        function getStatusColor(status) {
            const colors = {
                'modified': 'var(--accent-orange)',
                'staged': 'var(--accent-blue)', 
                'committed': 'var(--accent-green)',
                'added': 'var(--accent-green)',
                'deleted': 'var(--accent-red)',
                'untracked': 'var(--text-secondary)',
                'unknown': 'var(--text-secondary)'
            };
            return colors[status] || 'var(--text-secondary)';
        }

        // Ïï± Ï¥àÍ∏∞Ìôî
        async function initializeApp() {
            try {
                // ÏÑ§Ï†ï Î°úÎìú
                await loadAppConfig();
                
                // ÏµúÍ∑º ÌîÑÎ°úÏ†ùÌä∏ Î°úÎìú
                await loadRecentProjects();
                
                console.log('Ïï± Ï¥àÍ∏∞Ìôî ÏôÑÎ£å');
            } catch (error) {
                console.error('Ïï± Ï¥àÍ∏∞Ìôî Ïã§Ìå®:', error);
            }
        }

        // Ïï± ÏÑ§Ï†ï Î°úÎìú
        async function loadAppConfig() {
            try {
                const result = await window.electron.config.load();
                if (result.success) {
                    const config = result.config;
                    if (config.theme && config.theme !== currentTheme) {
                        currentTheme = config.theme;
                        document.body.setAttribute('data-theme', currentTheme);
                        updateThemeUI();
                    }
                    if (config.notifications !== undefined) {
                        notificationsEnabled = config.notifications;
                        updateNotificationUI();
                    }
                }
            } catch (error) {
                console.error('ÏÑ§Ï†ï Î°úÎìú Ïã§Ìå®:', error);
            }
        }

        // ÏïåÎ¶º UI ÏóÖÎç∞Ïù¥Ìä∏
        function updateNotificationUI() {
            const toggleButton = document.getElementById('notificationToggle');
            const toggleText = document.getElementById('notificationToggleText');
            const notificationIcon = document.getElementById('notificationIcon');
            
            if (toggleButton && toggleText && notificationIcon) {
                if (notificationsEnabled) {
                    toggleButton.className = 'btn btn-primary';
                    toggleText.textContent = 'ÏºúÏßê';
                    notificationIcon.textContent = 'üîî';
                } else {
                    toggleButton.className = 'btn btn-secondary';
                    toggleText.textContent = 'Í∫ºÏßê';
                    notificationIcon.textContent = 'üîï';
                }
            }
        }

        // ÏµúÍ∑º ÌîÑÎ°úÏ†ùÌä∏ Î°úÎìú
        async function loadRecentProjects() {
            try {
                const result = await window.electron.recentProjects.load();
                if (result.success) {
                    window.recentProjectsList = result.projects || [];
                }
            } catch (error) {
                console.error('ÏµúÍ∑º ÌîÑÎ°úÏ†ùÌä∏ Î°úÎìú Ïã§Ìå®:', error);
                window.recentProjectsList = [];
            }
        }

        // ÌååÏùº ÌÅ¨Í∏∞ Ìè¨Îß∑ÌåÖ
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 B';
            const k = 1024;
            const sizes = ['B', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
        }

        // ÎÇ†Ïßú Ìè¨Îß∑ÌåÖ
        function formatDate(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diffMs = now - date;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);
            const diffDays = Math.floor(diffMs / 86400000);

            if (diffMins < 1) return 'Î∞©Í∏à Ï†Ñ';
            if (diffMins < 60) return `${diffMins}Î∂Ñ Ï†Ñ`;
            if (diffHours < 24) return `${diffHours}ÏãúÍ∞Ñ Ï†Ñ`;
            if (diffDays < 7) return `${diffDays}Ïùº Ï†Ñ`;
            
            return date.toLocaleDateString('ko-KR');
        }

        // ÌååÏùº ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
        async function updateFileStatuses(files) {
            if (!currentProject) return;
            
            try {
                const result = await window.electron.dgit.status(currentProject.path);
                if (result.success) {
                    const statusMap = parseGitStatus(result.output);
                    
                    files.forEach(file => {
                        if (statusMap[file.name]) {
                            file.status = statusMap[file.name];
                        } else {
                            file.status = 'committed';
                        }
                    });
                }
            } catch (error) {
                console.error('ÌååÏùº ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏ Ïã§Ìå®:', error);
            }
        }

        // Git ÏÉÅÌÉú Ï∂úÎ†• ÌååÏã±
        function parseGitStatus(output) {
            const statusMap = {};
            const lines = output.split('\n');
            
            for (const line of lines) {
                const trimmed = line.trim();
                if (!trimmed) continue;
                
                // DGit ÏÉÅÌÉú Ï∂úÎ†• ÌòïÏãù ÌååÏã±
                const match = trimmed.match(/^([MAD?!])\s+(.+)$/);
                if (match) {
                    const [, statusCode, filename] = match;
                    const status = getGitStatusText(statusCode);
                    statusMap[filename] = status;
                }
            }
            
            return statusMap;
        }

        // Git ÏÉÅÌÉú ÏΩîÎìúÎ•º ÌÖçÏä§Ìä∏Î°ú Î≥ÄÌôò
        function getGitStatusText(statusCode) {
            const statusMap = {
                'M': 'modified',
                'A': 'added', 
                'D': 'deleted',
                'R': 'renamed',
                'C': 'copied',
                'U': 'updated',
                '?': 'untracked',
                '!': 'ignored'
            };
            return statusMap[statusCode] || 'unknown';
        }

        // Ïª§Î∞ã Î°úÍ∑∏ ÌååÏã±
        function parseCommitLog(output) {
            const commits = [];
            if (!output || !output.trim()) return commits;
            
            const lines = output.split('\n');
            let currentCommit = null;
            
            for (const line of lines) {
                if (line.startsWith('commit ')) {
                    if (currentCommit) {
                        commits.push(currentCommit);
                    }
                    // DGit ÌòïÏãù: "commit 4ea7d8384946 (v2)"
                    const commitMatch = line.match(/commit\s+([a-f0-9]+)\s*\(([^)]+)\)/);
                    if (commitMatch) {
                        currentCommit = {
                            hash: commitMatch[1].substring(0, 7),
                            version: commitMatch[2],
                            message: '',
                            author: '',
                            date: '',
                            files: 0
                        };
                    }
                } else if (line.startsWith('Author: ') && currentCommit) {
                    currentCommit.author = line.substring(8).trim();
                } else if (line.startsWith('Date: ') && currentCommit) {
                    const dateStr = line.substring(6).trim();
                    currentCommit.date = formatCommitDate(dateStr);
                } else if (line.startsWith('    ') && currentCommit && !currentCommit.message) {
                    // Ïª§Î∞ã Î©îÏãúÏßÄÎäî 4Í∞ú Í≥µÎ∞±ÏúºÎ°ú Îì§Ïó¨Ïì∞Í∏∞Îê®
                    currentCommit.message = line.trim();
                } else if (line.startsWith('    Files: ') && currentCommit) {
                    const filesMatch = line.match(/Files:\s+(\d+)/);
                    if (filesMatch) {
                        currentCommit.files = parseInt(filesMatch[1]);
                    }
                }
            }
            
            if (currentCommit) {
                commits.push(currentCommit);
            }
            
            return commits;
        }

        // Ïª§Î∞ã ÎÇ†Ïßú Ìè¨Îß∑ÌåÖ
        function formatCommitDate(dateStr) {
            try {
                const date = new Date(dateStr);
                return formatDate(date);
            } catch (error) {
                return dateStr;
            }
        }

        // ÌÑ∞ÎØ∏ÎÑê ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
        function updateTerminalStatus(statusOutput) {
            const terminalStatus = document.getElementById('terminalStatus');
            if (terminalStatus) {
                terminalStatus.innerHTML = `<pre style="margin: 0; font-family: inherit;">${statusOutput}</pre>`;
            }
        }

        // ÌÖåÎßà UI ÏóÖÎç∞Ïù¥Ìä∏
        function updateThemeUI() {
            const themeIcon = document.getElementById('themeIcon');
            const themeText = document.getElementById('themeText');
            
            if (currentTheme === 'light') {
                if (themeIcon) themeIcon.textContent = 'üåû';
                if (themeText) themeText.textContent = 'Îã§ÌÅ¨ Î™®ÎìúÎ°ú Ï†ÑÌôò';
            } else {
                if (themeIcon) themeIcon.textContent = 'üåô';
                if (themeText) themeText.textContent = 'ÎùºÏù¥Ìä∏ Î™®ÎìúÎ°ú Ï†ÑÌôò';
            }
        }

        // ÌÖåÎßà ÌÜ†Í∏Ä
        function toggleTheme() {
            currentTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.body.setAttribute('data-theme', currentTheme);
            
            const themeIcon = document.getElementById('themeIcon');
            const themeText = document.getElementById('themeText');
            
            if (currentTheme === 'light') {
                themeIcon.textContent = 'üåû';
                if (themeText) themeText.textContent = 'Îã§ÌÅ¨ Î™®ÎìúÎ°ú Ï†ÑÌôò';
            } else {
                themeIcon.textContent = 'üåô';
                if (themeText) themeText.textContent = 'ÎùºÏù¥Ìä∏ Î™®ÎìúÎ°ú Ï†ÑÌôò';
            }
            
            showToast('ÌÖåÎßàÍ∞Ä Î≥ÄÍ≤ΩÎêòÏóàÏäµÎãàÎã§', 'success');
        }

        // Ìä∏ÎûòÌîΩ ÎùºÏù¥Ìä∏ Î≤ÑÌäº Ìï®ÏàòÎì§
        function closeApp() {
            if (window.electron) {
                window.electron.closeApp();
            } else {
                window.close();
            }
        }

        function minimizeApp() {
            if (window.electron) {
                window.electron.minimizeApp();
            }
        }

        function maximizeApp() {
            if (window.electron) {
                window.electron.maximizeApp();
            }
        }

        // Ìôà ÌôîÎ©¥ Î≤ÑÌäº Ìï®ÏàòÎì§
        async function selectNewProject() {
            try {
                // Î®ºÏ†Ä DGit CLI ÏÇ¨Ïö© Í∞ÄÎä• Ïó¨Î∂Ä ÌôïÏù∏
                const isDGitAvailable = await checkDGitAvailability();
                
                if (!isDGitAvailable) {
                    showModal('DGit CLI ÏóÜÏùå', 'DGit CLIÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§', `
                        <div style="padding: 20px; text-align: center;">
                            <p style="margin-bottom: 20px; color: var(--text-secondary);">
                                DGit CLIÍ∞Ä ÏÑ§ÏπòÎêòÏñ¥ ÏûàÏßÄ ÏïäÍ±∞ÎÇò Í≤ΩÎ°úÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.<br>
                                Í∑∏ÎûòÎèÑ ÌîÑÎ°úÏ†ùÌä∏Î•º Ïó¥Ïñ¥ÏÑú ÌååÏùºÏùÑ ÌôïÏù∏Ìï† Ïàò ÏûàÏäµÎãàÎã§.
                            </p>
                            <button class="btn btn-primary" onclick="selectProjectWithoutDGit()">
                                DGit ÏóÜÏù¥ ÌîÑÎ°úÏ†ùÌä∏ Ïó¥Í∏∞
                            </button>
                        </div>
                    `);
                    return;
                }

                const result = await window.electron.selectFolder();
                
                if (result.success) {
                    const projectInfo = {
                        name: result.name,
                        path: result.path
                    };
                    
                    // DGit Ï†ÄÏû•ÏÜå Ï¥àÍ∏∞Ìôî ÌôïÏù∏
                    const isRepo = await checkIfRepository(result.path);
                    
                    if (!isRepo) {
                        showModal('DGit Ï†ÄÏû•ÏÜå Ï¥àÍ∏∞Ìôî', 'Ïù¥ Ìè¥ÎçîÎäî DGit Ï†ÄÏû•ÏÜåÍ∞Ä ÏïÑÎãôÎãàÎã§', `
                            <div style="padding: 20px;">
                                <p style="margin-bottom: 20px; color: var(--text-secondary);">
                                    ÏÑ†ÌÉùÌïú Ìè¥ÎçîÏóê DGit Ï†ÄÏû•ÏÜåÎ•º Ï¥àÍ∏∞ÌôîÌïòÏãúÍ≤†ÏäµÎãàÍπå?<br>
                                    ÎòêÎäî DGit ÏóÜÏù¥ ÌååÏùºÎßå ÌôïÏù∏Ìï† ÏàòÎèÑ ÏûàÏäµÎãàÎã§.
                                </p>
                                <div style="background: var(--bg-tertiary); padding: 12px; border-radius: 6px; margin-bottom: 20px;">
                                    <strong>Ìè¥Îçî:</strong> ${result.path}
                                </div>
                                <div style="display: flex; gap: 12px; justify-content: center;">
                                    <button class="btn btn-primary" onclick="initializeRepository(${JSON.stringify(projectInfo).replace(/"/g, '&quot;')})">
                                        DGit Ï†ÄÏû•ÏÜå Ï¥àÍ∏∞Ìôî
                                    </button>
                                    <button class="btn btn-secondary" onclick="openProjectWithoutDGit(${JSON.stringify(projectInfo).replace(/"/g, '&quot;')})" style="padding: 12px 20px !important; background: #1a1a1a !important; color: #ffffff !important; font-size: 0.95rem !important; min-height: 40px !important; border-radius: 8px !important; border: none !important; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;">
                                        DGit ÏóÜÏù¥ Ïó¥Í∏∞
                                    </button>
                                </div>
                            </div>
                        `);
                    } else {
                        await openProject(projectInfo);
                    }
                } else {
                    showToast('Ìè¥Îçî ÏÑ†ÌÉùÏù¥ Ï∑®ÏÜåÎêòÏóàÏäµÎãàÎã§', 'warning');
                }
            } catch (error) {
                console.error('ÌîÑÎ°úÏ†ùÌä∏ ÏÑ†ÌÉù Ïã§Ìå®:', error);
                showToast('ÌîÑÎ°úÏ†ùÌä∏ ÏÑ†ÌÉù Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§', 'error');
            }
        }

        // DGit ÏóÜÏù¥ ÌîÑÎ°úÏ†ùÌä∏ ÏÑ†ÌÉù
        async function selectProjectWithoutDGit() {
            closeModal();
            
            try {
                const result = await window.electron.selectFolder();
                
                if (result.success) {
                    const projectInfo = {
                        name: result.name,
                        path: result.path
                    };
                    
                    await openProjectWithoutDGit(projectInfo);
                } else {
                    showToast('Ìè¥Îçî ÏÑ†ÌÉùÏù¥ Ï∑®ÏÜåÎêòÏóàÏäµÎãàÎã§', 'warning');
                }
            } catch (error) {
                console.error('ÌîÑÎ°úÏ†ùÌä∏ ÏÑ†ÌÉù Ïã§Ìå®:', error);
                showToast('ÌîÑÎ°úÏ†ùÌä∏ ÏÑ†ÌÉù Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§', 'error');
            }
        }

        // DGit Í∏∞Îä• ÏóÜÏù¥ ÌîÑÎ°úÏ†ùÌä∏ Ïó¥Í∏∞
        async function openProjectWithoutDGit(projectInfo) {
            closeModal();
            
            currentProject = projectInfo;
            document.getElementById('homeScreen').style.display = 'none';
            document.getElementById('workspace').classList.add('active');
            document.getElementById('titleText').textContent = `DGit MAC - ${projectInfo.name} (DGit ÏóÜÏùå)`;
            document.getElementById('projectName').textContent = projectInfo.name;
            document.getElementById('projectPath').textContent = projectInfo.path;
            
            // ÏµúÍ∑º ÌîÑÎ°úÏ†ùÌä∏Ïóê Ï†ÄÏû•
            try {
                await window.electron.recentProjects.save(projectInfo);
                await loadRecentProjects();
            } catch (error) {
                console.error('ÏµúÍ∑º ÌîÑÎ°úÏ†ùÌä∏ Ï†ÄÏû• Ïã§Ìå®:', error);
            }
            
            // ÌååÏùºÎßå Î°úÎìú (DGit Í∏∞Îä• Ï†úÏô∏)
            await loadProjectFilesOnly();
            
            showToast(`ÌîÑÎ°úÏ†ùÌä∏ '${projectInfo.name}'ÏùÑ Ïó¥ÏóàÏäµÎãàÎã§ (DGit Í∏∞Îä• ÏóÜÏùå)`, 'warning');
        }

        // ÌååÏùºÎßå Î°úÎìú (DGit Í∏∞Îä• Ï†úÏô∏)
        async function loadProjectFilesOnly() {
            if (!currentProject) return;
            
            try {
                const result = await window.electron.scanDirectory(currentProject.path);
                
                if (result.success) {
                    const files = result.files.map(file => ({
                        name: file.name,
                        type: file.type,
                        size: formatFileSize(file.size),
                        modified: formatDate(file.modified),
                        status: 'unknown',
                        path: file.path
                    }));
                    
                    renderFiles(files);
                    
                    // Îπà Ïª§Î∞ã ÌûàÏä§ÌÜ†Î¶¨ÏôÄ ÏÉÅÌÉú ÌëúÏãú
                    renderCommits([]);
                    updateTerminalStatus('DGit CLIÎ•º ÏÇ¨Ïö©Ìï† Ïàò ÏóÜÏäµÎãàÎã§. ÌååÏùº Î≥¥Í∏∞Îßå Í∞ÄÎä•Ìï©ÎãàÎã§.');
                } else {
                    showToast('ÌååÏùºÏùÑ Ïä§Ï∫îÌï† Ïàò ÏóÜÏäµÎãàÎã§', 'error');
                }
            } catch (error) {
                console.error('ÌååÏùº Î°úÎìú Ïã§Ìå®:', error);
                showToast('ÌååÏùº Î°úÎìú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§', 'error');
            }
        }

        async function openCurrentProject() {
            // ÏµúÍ∑º ÌîÑÎ°úÏ†ùÌä∏ Î™©Î°ùÏóêÏÑú Í∞ÄÏû• ÏµúÍ∑º ÌîÑÎ°úÏ†ùÌä∏ Í∞ÄÏ†∏Ïò§Í∏∞
            const recentProjects = window.recentProjectsList || [];
            
            if (recentProjects.length > 0) {
                const mostRecentProject = recentProjects[0];
                await openProject(mostRecentProject);
            } else {
                showToast('ÏßÑÌñâ Ï§ëÏù∏ ÌîÑÎ°úÏ†ùÌä∏Í∞Ä ÏóÜÏäµÎãàÎã§', 'warning');
            }
        }

        async function showRecentProjects() {
            const recentProjects = window.recentProjectsList || [];
            
            if (recentProjects.length === 0) {
                showModal('ÏßÄÎÇú ÌîÑÎ°úÏ†ùÌä∏', 'ÏµúÍ∑º ÏûëÏóÖÌïú ÌîÑÎ°úÏ†ùÌä∏Í∞Ä ÏóÜÏäµÎãàÎã§', `
                    <div style="text-align: center; padding: 40px; color: var(--text-secondary);">
                        <p>ÏïÑÏßÅ ÏûëÏóÖÌïú ÌîÑÎ°úÏ†ùÌä∏Í∞Ä ÏóÜÏäµÎãàÎã§.</p>
                        <p>ÏÉà ÌîÑÎ°úÏ†ùÌä∏Î•º ÏÑ†ÌÉùÌïòÏó¨ ÏãúÏûëÌï¥Î≥¥ÏÑ∏Ïöî.</p>
                    </div>
                `);
                return;
            }

            const projectList = recentProjects.map(project => `
                <div class="file-item" onclick="openRecentProject('${project.path}', '${project.name}')">
                    <div class="file-thumbnail">üìÅ</div>
                    <div class="file-info">
                        <div class="file-name">${project.name}</div>
                        <div class="file-details">${project.path} ‚Ä¢ ${formatDate(project.lastOpened)}</div>
                    </div>
                </div>
            `).join('');

            showModal('ÏßÄÎÇú ÌîÑÎ°úÏ†ùÌä∏', 'ÏµúÍ∑º ÏûëÏóÖÌïú ÌîÑÎ°úÏ†ùÌä∏Î•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî', `
                <div class="file-list">
                    ${projectList}
                </div>
            `);
        }

        // Ï†ÄÏû•ÏÜå ÌôïÏù∏
        async function checkIfRepository(projectPath) {
            try {
                const result = await window.electron.dgit.status(projectPath);
                return result.success;
            } catch (error) {
                console.log('Repository check error:', error);
                return false;
            }
        }

        // DGit CLI ÏÇ¨Ïö© Í∞ÄÎä• Ïó¨Î∂Ä ÌôïÏù∏
        async function checkDGitAvailability() {
            try {
                const result = await window.electron.dgit.command('help');
                return result.success;
            } catch (error) {
                return false;
            }
        }

        // Ï†ÄÏû•ÏÜå Ï¥àÍ∏∞Ìôî
        async function initializeRepository(projectInfo) {
            closeModal();
            
            try {
                showToast('DGit Ï†ÄÏû•ÏÜåÎ•º Ï¥àÍ∏∞ÌôîÌïòÎäî Ï§ë...', 'info');
                
                const result = await window.electron.dgit.command('init', [], projectInfo.path);
                
                if (result.success) {
                    showToast('DGit Ï†ÄÏû•ÏÜåÍ∞Ä Ï¥àÍ∏∞ÌôîÎêòÏóàÏäµÎãàÎã§', 'success');
                    await openProjectDirectly(projectInfo);
                } else {
                    showToast('Ï†ÄÏû•ÏÜå Ï¥àÍ∏∞ÌôîÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§', 'error');
                }
            } catch (error) {
                console.error('Ï†ÄÏû•ÏÜå Ï¥àÍ∏∞Ìôî Ïã§Ìå®:', error);
                showToast('Ï†ÄÏû•ÏÜå Ï¥àÍ∏∞Ìôî Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§', 'error');
            }
        }

        // ÌîÑÎ°úÏ†ùÌä∏ Ïó¥Í∏∞
        async function openProject(projectInfo) {
            // DGit Ï†ÄÏû•ÏÜå Ï°¥Ïû¨ Ïó¨Î∂Ä ÌôïÏù∏
            try {
                const statusResult = await window.electron.dgit.command('status', [], projectInfo.path);
                
                // DGit Ï†ÄÏû•ÏÜåÍ∞Ä ÏóÜÎäî Í≤ΩÏö∞ Ï¥àÍ∏∞Ìôî ÌîÑÎ°¨ÌîÑÌä∏ ÌëúÏãú
                if (!statusResult.success && statusResult.error && statusResult.error.includes('not a DGit repository')) {
                    showDGitInitPrompt(projectInfo);
                    return;
                }
            } catch (error) {
                // DGit Î™ÖÎ†π Ïã§Ìñâ Ïã§Ìå® Ïãú Ï¥àÍ∏∞Ìôî ÌîÑÎ°¨ÌîÑÌä∏ ÌëúÏãú
                showDGitInitPrompt(projectInfo);
                return;
            }
            
            // DGit Ï†ÄÏû•ÏÜåÍ∞Ä ÏûàÎäî Í≤ΩÏö∞ Ï†ïÏÉÅÏ†ÅÏúºÎ°ú ÌîÑÎ°úÏ†ùÌä∏ Ïó¥Í∏∞
            await openProjectDirectly(projectInfo);
        }

        // DGit Ï¥àÍ∏∞Ìôî ÌîÑÎ°¨ÌîÑÌä∏ ÌëúÏãú
        function showDGitInitPrompt(projectInfo) {
            showModal('DGit Ï†ÄÏû•ÏÜå Ï¥àÍ∏∞Ìôî', 'Ïù¥ ÌîÑÎ°úÏ†ùÌä∏ÏóêÎäî DGit Ï†ÄÏû•ÏÜåÍ∞Ä ÏóÜÏäµÎãàÎã§', `
                <div style="padding: 20px; text-align: center;">
                    <div style="margin-bottom: 20px;">
                        <div style="font-size: 3rem; margin-bottom: 16px;">üì¶</div>
                        <h3 style="margin-bottom: 12px; color: var(--text-primary);">DGit Ï†ÄÏû•ÏÜåÍ∞Ä ÌïÑÏöîÌï©ÎãàÎã§</h3>
                        <p style="color: var(--text-secondary); line-height: 1.5;">
                            Ïù¥ ÌîÑÎ°úÏ†ùÌä∏ÏóêÏÑú Î≤ÑÏ†Ñ Í¥ÄÎ¶¨Î•º ÏÇ¨Ïö©ÌïòÎ†§Î©¥<br>
                            DGit Ï†ÄÏû•ÏÜåÎ•º Ï¥àÍ∏∞ÌôîÌï¥Ïïº Ìï©ÎãàÎã§.
                        </p>
                    </div>
                    <div style="display: flex; gap: 12px; justify-content: center;">
                        <button class="btn btn-secondary" onclick="closeModal()" style="padding: 12px 20px !important; background: #1a1a1a !important; color: #ffffff !important; font-size: 0.95rem !important; min-height: 40px !important; border-radius: 8px !important; border: none !important; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;">Ï∑®ÏÜå</button>
                        <button class="btn btn-primary" onclick="initializeRepository(${JSON.stringify(projectInfo).replace(/"/g, '&quot;')})" style="padding: 12px 20px !important; background: #007aff !important; color: #ffffff !important; font-size: 0.95rem !important; min-height: 40px !important; border-radius: 8px !important; border: none !important; box-shadow: 0 2px 8px rgba(0, 122, 255, 0.5) !important;">
                            Ï†ÄÏû•ÏÜå Ï¥àÍ∏∞Ìôî
                        </button>
                        <button class="btn btn-secondary" onclick="openProjectWithoutDGit(${JSON.stringify(projectInfo).replace(/"/g, '&quot;')})" style="padding: 12px 20px !important; background: #1a1a1a !important; color: #ffffff !important; font-size: 0.95rem !important; min-height: 40px !important; border-radius: 8px !important; border: none !important; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;">
                            DGit ÏóÜÏù¥ Ïó¥Í∏∞
                        </button>
                    </div>
                </div>
            `);
        }

        // ÌîÑÎ°úÏ†ùÌä∏ ÏßÅÏ†ë Ïó¥Í∏∞ (DGit Ï†ÄÏû•ÏÜå ÌôïÏù∏ ÏôÑÎ£å ÌõÑ)
        async function openProjectDirectly(projectInfo) {
            currentProject = projectInfo;
            document.getElementById('homeScreen').style.display = 'none';
            document.getElementById('workspace').classList.add('active');
            document.getElementById('titleText').textContent = `DGit MAC - ${projectInfo.name}`;
            document.getElementById('projectName').textContent = projectInfo.name;
            document.getElementById('projectPath').textContent = projectInfo.path;
            
            // ÏµúÍ∑º ÌîÑÎ°úÏ†ùÌä∏Ïóê Ï†ÄÏû•
            try {
                await window.electron.recentProjects.save(projectInfo);
                await loadRecentProjects(); // Î™©Î°ù ÏÉàÎ°úÍ≥†Ïπ®
            } catch (error) {
                console.error('ÏµúÍ∑º ÌîÑÎ°úÏ†ùÌä∏ Ï†ÄÏû• Ïã§Ìå®:', error);
            }
            
            // ÌîÑÎ°úÏ†ùÌä∏ Îç∞Ïù¥ÌÑ∞ Î°úÎìú
            await loadProjectData();
            
            showToast(`ÌîÑÎ°úÏ†ùÌä∏ '${projectInfo.name}'ÏùÑ Ïó¥ÏóàÏäµÎãàÎã§`, 'success');
        }

        function openRecentProject(path, name) {
            closeModal();
            openProject({ name, path });
        }

        // ÌôàÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
        function goHome() {
            document.getElementById('workspace').classList.remove('active');
            document.getElementById('homeScreen').style.display = 'flex';
            document.getElementById('titleText').textContent = 'DGit MAC';
            currentProject = null;
        }

        // ÏÇ¨Ïù¥ÎìúÎ∞î ÏΩòÌÖêÏ∏† ÌëúÏãú
        function showContent(contentType) {
            // Î™®Îì† ÏΩòÌÖêÏ∏† ÏÑπÏÖò Ïà®Í∏∞Í∏∞
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
                section.classList.add('hidden');
            });
            
            // ÏÇ¨Ïù¥ÎìúÎ∞î ÌôúÏÑ±Ìôî ÏÉÅÌÉú Î≥ÄÍ≤Ω
            document.querySelectorAll('.nav-link').forEach(item => {
                item.classList.remove('active');
            });
            
            // ÏÑ†ÌÉùÎêú ÏΩòÌÖêÏ∏† ÌëúÏãú
            const contentElement = document.getElementById(`${contentType}Content`);
            if (contentElement) {
                contentElement.classList.remove('hidden');
                contentElement.classList.add('active');
            }
            
            // ÌÅ¥Î¶≠Îêú ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò ÎßÅÌÅ¨ ÌôúÏÑ±Ìôî
            if (event && event.target) {
                event.target.closest('.nav-link').classList.add('active');
            }
            
            activeContent = contentType;
        }

        // ÌÑ∞ÎØ∏ÎÑê ÌÉ≠ Ï†ÑÌôò
        function showTerminalTab(tabType) {
            document.querySelectorAll('.terminal-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            event.target.classList.add('active');
            
            if (tabType === 'log') {
                document.getElementById('terminalLog').classList.remove('hidden');
                document.getElementById('terminalStatus').classList.add('hidden');
            } else {
                document.getElementById('terminalLog').classList.add('hidden');
                document.getElementById('terminalStatus').classList.remove('hidden');
            }
        }

        // ÌÑ∞ÎØ∏ÎÑê ÌÜ†Í∏Ä
        function toggleTerminal() {
            const terminalPanel = document.getElementById('terminalPanel');
            const toggleBtn = document.getElementById('terminalToggleBtn');
            
            if (terminalPanel.classList.contains('collapsed')) {
                terminalPanel.classList.remove('collapsed');
                toggleBtn.textContent = '‚úï';
            } else {
                terminalPanel.classList.add('collapsed');
                toggleBtn.textContent = '+';
            }
        }

        // ÌååÏùº ÎØ∏Î¶¨Î≥¥Í∏∞
        function previewFile(filename) {
            showModal('ÌååÏùº ÎØ∏Î¶¨Î≥¥Í∏∞', filename, `
                <div style="text-align: center; padding: 40px;">
                    <div style="width: 200px; height: 150px; background: var(--bg-tertiary); border-radius: 8px; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-size: 3rem;">
                        ${getFileIcon(filename.split('.').pop())}
                    </div>
                    <p style="color: var(--text-secondary);">
                        ${filename}Ïùò ÎØ∏Î¶¨Î≥¥Í∏∞ÏûÖÎãàÎã§.<br>
                        Ïã§Ï†ú Íµ¨ÌòÑÏóêÏÑúÎäî Ïù¥ÎØ∏ÏßÄ Ïç∏ÎÑ§ÏùºÏù¥ ÌëúÏãúÎê©ÎãàÎã§.
                    </p>
                </div>
            `);
        }

        // Ïª§Î∞ã ÏÉÅÏÑ∏Î≥¥Í∏∞
        async function viewCommit(hash) {
            if (!currentProject) return;
            
            try {
                // Ïã§Ï†ú Ïª§Î∞ã Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞
                const result = await window.electron.dgit.command('show', ['--name-only', hash], currentProject.path);
                
                let commitDetails = `
                    <div style="padding: 20px;">
                        <h4 style="margin-bottom: 16px;">Ïª§Î∞ã Ìï¥Ïãú: ${hash}</h4>
                `;
                
                if (result.success) {
                    const lines = result.output.split('\n');
                    const commitMessage = lines.find(line => line.trim() && !line.startsWith('commit') && !line.startsWith('Author') && !line.startsWith('Date')) || 'Ïª§Î∞ã Î©îÏãúÏßÄ ÏóÜÏùå';
                    
                    commitDetails += `
                        <h4 style="margin: 20px 0 16px 0;">Ïª§Î∞ã Î©îÏãúÏßÄ:</h4>
                        <p style="color: var(--text-secondary); background: var(--bg-tertiary); padding: 12px; border-radius: 6px;">
                            ${commitMessage}
                        </p>
                    `;
                } else {
                    commitDetails += `
                        <p style="color: var(--text-secondary);">Ïª§Î∞ã Ï†ïÎ≥¥Î•º Î∂àÎü¨Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§.</p>
                    `;
                }
                
                commitDetails += `</div>`;
                
                showModal('Ïª§Î∞ã ÏÉÅÏÑ∏Ï†ïÎ≥¥', `Ïª§Î∞ã ${hash}`, commitDetails);
            } catch (error) {
                console.error('Ïª§Î∞ã Ï†ïÎ≥¥ Î°úÎìú Ïã§Ìå®:', error);
                showModal('Ïª§Î∞ã ÏÉÅÏÑ∏Ï†ïÎ≥¥', `Ïª§Î∞ã ${hash}`, `
                    <div style="padding: 20px;">
                        <p style="color: var(--text-secondary);">Ïª§Î∞ã Ï†ïÎ≥¥Î•º Î∂àÎü¨Ïò§Îäî Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.</p>
                    </div>
                `);
            }
        }

        // ÌîÑÎ°úÏ†ùÌä∏ Î≥ÄÍ≤Ω
        async function changeProject() {
            await selectNewProject();
        }

        // ÌîÑÎ°úÏ†ùÌä∏ Ïä§Ï∫î
        async function scanProject() {
            if (!currentProject) {
                showToast('ÌîÑÎ°úÏ†ùÌä∏Í∞Ä ÏÑ†ÌÉùÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§', 'warning');
                return;
            }

            try {
                showToast('ÌîÑÎ°úÏ†ùÌä∏Î•º Ïä§Ï∫îÌïòÍ≥† ÏûàÏäµÎãàÎã§...', 'info');
                await loadProjectData();
                showToast('ÌîÑÎ°úÏ†ùÌä∏ Ïä§Ï∫îÏù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§', 'success');
            } catch (error) {
                console.error('ÌîÑÎ°úÏ†ùÌä∏ Ïä§Ï∫î Ïã§Ìå®:', error);
                showToast('ÌîÑÎ°úÏ†ùÌä∏ Ïä§Ï∫î Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§', 'error');
            }
        }

        // Î™®Îì† ÌååÏùº Ï∂îÍ∞Ä
        async function addAllFiles() {
            if (!currentProject) {
                showToast('ÌîÑÎ°úÏ†ùÌä∏Í∞Ä ÏÑ†ÌÉùÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§', 'warning');
                return;
            }

            try {
                const result = await window.electron.dgit.command('add', ['.'], currentProject.path);
                
                if (result.success) {
                    showToast('Î™®Îì† ÌååÏùºÏù¥ Ïä§ÌÖåÏù¥Ïßï ÏòÅÏó≠Ïóê Ï∂îÍ∞ÄÎêòÏóàÏäµÎãàÎã§', 'success');
                    await loadProjectData(); // ÌååÏùº ÏÉÅÌÉú ÏÉàÎ°úÍ≥†Ïπ®
                } else {
                    showToast('ÌååÏùº Ï∂îÍ∞Ä Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§', 'error');
                }
            } catch (error) {
                console.error('ÌååÏùº Ï∂îÍ∞Ä Ïã§Ìå®:', error);
                showToast('ÌååÏùº Ï∂îÍ∞Ä Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§', 'error');
            }
        }

        // ÌååÏùº Î≥µÏõê
        async function restoreFiles() {
            if (!currentProject) {
                showToast('ÌîÑÎ°úÏ†ùÌä∏Í∞Ä ÏÑ†ÌÉùÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§', 'warning');
                return;
            }

            showModal('ÌååÏùº Î≥µÏõê', 'Î≥ÄÍ≤ΩÏÇ¨Ìï≠ÏùÑ Î≥µÏõêÌïòÏãúÍ≤†ÏäµÎãàÍπå?', `
                <div style="padding: 20px;">
                    <p style="margin-bottom: 20px; color: var(--text-secondary);">
                        Ïù¥ ÏûëÏóÖÏùÄ Î™®Îì† Î≥ÄÍ≤ΩÏÇ¨Ìï≠ÏùÑ ÎßàÏßÄÎßâ Ïª§Î∞ã ÏÉÅÌÉúÎ°ú ÎêòÎèåÎ¶ΩÎãàÎã§.<br>
                        <strong style="color: var(--accent-red);">Ï£ºÏùò: Ïù¥ ÏûëÏóÖÏùÄ ÎêòÎèåÎ¶¥ Ïàò ÏóÜÏäµÎãàÎã§.</strong>
                    </p>
                    <div style="display: flex; gap: 12px; justify-content: center;">
                        <button class="btn btn-secondary" onclick="closeModal()" style="padding: 12px 20px !important; background: #1a1a1a !important; color: #ffffff !important; font-size: 0.95rem !important; min-height: 40px !important; border-radius: 8px !important; border: none !important; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;">Ï∑®ÏÜå</button>
                        <button class="btn btn-danger" onclick="performRestore()" style="padding: 12px 20px !important; background: #ff3b30 !important; color: #ffffff !important; font-size: 0.95rem !important; min-height: 40px !important; border-radius: 8px !important; border: none !important; box-shadow: 0 2px 8px rgba(255, 59, 48, 0.5) !important;">Î≥µÏõê Ïã§Ìñâ</button>
                    </div>
                </div>
            `);
        }

        // Î≥µÏõê Ïã§Ìñâ
        async function performRestore() {
            closeModal();
            
            try {
                showToast('ÌååÏùºÏùÑ Î≥µÏõêÌïòÎäî Ï§ë...', 'info');
                
                // ÌÑ∞ÎØ∏ÎÑêÏóê Î°úÍ∑∏ Ï∂îÍ∞Ä
                const terminalLog = document.getElementById('terminalLog');
                terminalLog.innerHTML += `
                    <div style="margin-bottom: 8px;">
                        <span style="color: var(--accent-blue);">‚è≥</span> 
                        <span style="color: var(--text-secondary);">[${new Date().toLocaleTimeString()}]</span>
                        ÌååÏùº Î≥µÏõê ÏãúÏûë...
                    </div>
                `;
                terminalLog.scrollTop = terminalLog.scrollHeight;

                // DGit reset --hard HEAD Î™ÖÎ†π ÏÇ¨Ïö© (Îçî ÌôïÏã§Ìïú Î≥µÏõê)
                const result = await window.electron.dgit.command('reset', ['--hard', 'HEAD'], currentProject.path);
                
                if (result.success) {
                    // ÏÑ±Í≥µ Î°úÍ∑∏ Ï∂îÍ∞Ä
                    terminalLog.innerHTML += `
                        <div style="margin-bottom: 8px;">
                            <span style="color: var(--accent-green);">‚úì</span> 
                            <span style="color: var(--text-secondary);">[${new Date().toLocaleTimeString()}]</span>
                            ÌååÏùº Î≥µÏõê ÏôÑÎ£å
                        </div>
                    `;
                    terminalLog.scrollTop = terminalLog.scrollHeight;
                    
                    showToast('ÌååÏùºÏù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Î≥µÏõêÎêòÏóàÏäµÎãàÎã§ ‚úÖ', 'success');
                    await loadProjectData(); // ÌååÏùº ÏÉÅÌÉú ÏÉàÎ°úÍ≥†Ïπ®
                } else {
                    // Ïã§Ìå® Î°úÍ∑∏ Ï∂îÍ∞Ä
                    terminalLog.innerHTML += `
                        <div style="margin-bottom: 8px;">
                            <span style="color: var(--accent-red);">‚úó</span> 
                            <span style="color: var(--text-secondary);">[${new Date().toLocaleTimeString()}]</span>
                            ÌååÏùº Î≥µÏõê Ïã§Ìå®: ${result.error || 'Ïïå Ïàò ÏóÜÎäî Ïò§Î•ò'}
                        </div>
                    `;
                    terminalLog.scrollTop = terminalLog.scrollHeight;
                    
                    showToast(`ÌååÏùº Î≥µÏõê Ïã§Ìå®: ${result.error || 'Ïïå Ïàò ÏóÜÎäî Ïò§Î•ò'}`, 'error');
                }
            } catch (error) {
                console.error('ÌååÏùº Î≥µÏõê Ïã§Ìå®:', error);
                
                // ÏóêÎü¨ Î°úÍ∑∏ Ï∂îÍ∞Ä
                const terminalLog = document.getElementById('terminalLog');
                terminalLog.innerHTML += `
                    <div style="margin-bottom: 8px;">
                        <span style="color: var(--accent-red);">‚úó</span> 
                        <span style="color: var(--text-secondary);">[${new Date().toLocaleTimeString()}]</span>
                        ÌååÏùº Î≥µÏõê Ïò§Î•ò: ${error.message}
                    </div>
                `;
                terminalLog.scrollTop = terminalLog.scrollHeight;
                
                showToast('ÌååÏùº Î≥µÏõê Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§', 'error');
            }
        }

        // FinderÏóêÏÑú Î≥¥Í∏∞
        async function showInFinder() {
            if (!currentProject) {
                showToast('ÌîÑÎ°úÏ†ùÌä∏Í∞Ä ÏÑ†ÌÉùÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§', 'warning');
                return;
            }

            try {
                const result = await window.electron.showInFinder(currentProject.path);
                
                if (result.success) {
                    showToast('FinderÏóêÏÑú ÌîÑÎ°úÏ†ùÌä∏ Ìè¥ÎçîÎ•º Ïó¥ÏóàÏäµÎãàÎã§', 'success');
                } else {
                    showToast('FinderÏóêÏÑú Ïó¥Í∏∞ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§', 'error');
                }
            } catch (error) {
                console.error('FinderÏóêÏÑú Î≥¥Í∏∞ Ïã§Ìå®:', error);
                showToast('FinderÏóêÏÑú Ïó¥Í∏∞ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§', 'error');
            }
        }

        // Î≥ÄÍ≤ΩÏÇ¨Ìï≠ Ïª§Î∞ã
        async function commitChanges() {
            if (!currentProject) {
                showToast('ÌîÑÎ°úÏ†ùÌä∏Í∞Ä ÏÑ†ÌÉùÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§', 'warning');
                return;
            }

            try {
                // ÌòÑÏû¨ ÏÉÅÌÉú ÌôïÏù∏
                const statusResult = await window.electron.dgit.status(currentProject.path);
                let statusInfo = 'ÏÉÅÌÉúÎ•º ÌôïÏù∏Ìï† Ïàò ÏóÜÏäµÎãàÎã§';
                let changedFiles = [];
                
                if (statusResult.success) {
                    // DGit ÏÉÅÌÉú Ï∂úÎ†• ÌååÏã± Í∞úÏÑ†
                    const statusOutput = statusResult.output.trim();
                    console.log('DGit status output:', statusOutput);
                    
                    // Îπà Ï∂úÎ†•Ïù¥Í±∞ÎÇò "nothing to commit" Î©îÏãúÏßÄÍ∞Ä ÏûàÏúºÎ©¥ Î≥ÄÍ≤ΩÏÇ¨Ìï≠ ÏóÜÏùå
                    if (!statusOutput || statusOutput.includes('nothing to commit') || statusOutput.includes('working tree clean')) {
                        // Ïä§ÌÖåÏù¥ÏßïÎêú ÌååÏùºÏù¥ ÏûàÎäîÏßÄ ÌôïÏù∏
                        const addResult = await window.electron.dgit.command('status', ['--porcelain'], currentProject.path);
                        if (addResult.success && addResult.output.trim()) {
                            // Ïä§ÌÖåÏù¥ÏßïÎêú ÌååÏùºÏù¥ ÏûàÏùå
                            const stagedLines = addResult.output.split('\n').filter(line => line.trim());
                            changedFiles = stagedLines.map(line => {
                                const status = line.substring(0, 2);
                                const file = line.substring(3);
                                return { status, file };
                            });
                            statusInfo = `${changedFiles.length}Í∞ú ÌååÏùºÏù¥ Ïä§ÌÖåÏù¥ÏßïÎê®`;
                        } else {
                            showToast('Ïª§Î∞ãÌï† Î≥ÄÍ≤ΩÏÇ¨Ìï≠Ïù¥ ÏóÜÏäµÎãàÎã§. Î®ºÏ†Ä "Î™®Îì† ÌååÏùº Ï∂îÍ∞Ä" Î≤ÑÌäºÏùÑ ÎàåÎü¨Ï£ºÏÑ∏Ïöî.', 'warning');
                            return;
                        }
                    } else {
                        // Î≥ÄÍ≤ΩÎêú ÌååÏùº ÌååÏã±
                        const statusLines = statusOutput.split('\n').filter(line => line.trim());
                        
                        if (statusLines.length === 0) {
                            showToast('Ïª§Î∞ãÌï† Î≥ÄÍ≤ΩÏÇ¨Ìï≠Ïù¥ ÏóÜÏäµÎãàÎã§. Î®ºÏ†Ä "Î™®Îì† ÌååÏùº Ï∂îÍ∞Ä" Î≤ÑÌäºÏùÑ ÎàåÎü¨Ï£ºÏÑ∏Ïöî.', 'warning');
                            return;
                        }
                        
                        changedFiles = statusLines.map(line => {
                            // DGit ÏÉÅÌÉú ÌòïÏãùÏóê ÎßûÍ≤å ÌååÏã±
                            const trimmedLine = line.trim();
                            if (trimmedLine.length < 3) return null;
                            const status = trimmedLine.substring(0, 2);
                            const file = trimmedLine.substring(3);
                            return {
                                status: status || 'M',
                                file: file || trimmedLine
                            };
                        }).filter(item => item && item.file);
                        
                        const totalCount = changedFiles.length;
                        if (totalCount > 0) {
                            statusInfo = `${totalCount}Í∞ú ÌååÏùºÏù¥ Î≥ÄÍ≤ΩÎê®`;
                        } else {
                            showToast('Ïª§Î∞ãÌï† Î≥ÄÍ≤ΩÏÇ¨Ìï≠Ïù¥ ÏóÜÏäµÎãàÎã§. Î®ºÏ†Ä "Î™®Îì† ÌååÏùº Ï∂îÍ∞Ä" Î≤ÑÌäºÏùÑ ÎàåÎü¨Ï£ºÏÑ∏Ïöî.', 'warning');
                            return;
                        }
                    }
                } else {
                    showToast('ÌîÑÎ°úÏ†ùÌä∏ ÏÉÅÌÉúÎ•º ÌôïÏù∏Ìï† Ïàò ÏóÜÏäµÎãàÎã§', 'error');
                    return;
                }

                showModal('Î≥ÄÍ≤ΩÏÇ¨Ìï≠ Ïª§Î∞ã', '', `
                    <div class="commit-dialog">
                        <div class="commit-header">
                            <div class="commit-title">Î≥ÄÍ≤ΩÏÇ¨Ìï≠ÏùÑ Ïª§Î∞ãÌïòÏãúÍ≤†ÏäµÎãàÍπå?</div>
                            <div class="commit-subtitle">${statusInfo}</div>
                        </div>
                        
                        <div class="commit-files-preview">
                            ${changedFiles.slice(0, 5).map(file => `
                                <div class="commit-file-item">
                                    <div class="commit-file-status ${file.status}"></div>
                                    <div class="commit-file-name">${file.name}</div>
                                </div>
                            `).join('')}
                            ${changedFiles.length > 5 ? `
                                <div class="commit-file-more">Í∑∏ Ïô∏ ${changedFiles.length - 5}Í∞ú ÌååÏùº...</div>
                            ` : ''}
                        </div>
                        
                        <div class="commit-message-section">
                            <label class="commit-message-label">Ïª§Î∞ã Î©îÏãúÏßÄ</label>
                            <textarea 
                                id="commitMessage" 
                                placeholder="Î≥ÄÍ≤ΩÏÇ¨Ìï≠ÏùÑ ÏÑ§Î™ÖÌï¥Ï£ºÏÑ∏Ïöî..."
                                class="commit-message-input"
                            ></textarea>
                        </div>
                    </div>
                `, () => {
                    const message = document.getElementById('commitMessage').value;
                    if (message.trim()) {
                        performCommit(message);
                    } else {
                        showToast('Ïª§Î∞ã Î©îÏãúÏßÄÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî', 'warning');
                    }
                });
            } catch (error) {
                console.error('Ïª§Î∞ã Ï§ÄÎπÑ Ïã§Ìå®:', error);
                showToast('Ïª§Î∞ã Ï§ÄÎπÑ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§', 'error');
            }
        }

        async function performCommit(message) {
            closeModal();
            
            if (!currentProject) {
                showToast('ÌîÑÎ°úÏ†ùÌä∏Í∞Ä ÏÑ†ÌÉùÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§', 'error');
                return;
            }

            try {
                showToast('Î≥ÄÍ≤ΩÏÇ¨Ìï≠ÏùÑ Ïª§Î∞ãÌïòÎäî Ï§ë...', 'info');
                
                // ÌÑ∞ÎØ∏ÎÑêÏóê Î°úÍ∑∏ Ï∂îÍ∞Ä
                const terminalLog = document.getElementById('terminalLog');
                terminalLog.innerHTML += `
                    <div style="margin-bottom: 8px;">
                        <span style="color: var(--accent-blue);">‚è≥</span> 
                        <span style="color: var(--text-secondary);">[${new Date().toLocaleTimeString()}]</span>
                        Ïª§Î∞ã ÏãúÏûë: ${message}
                    </div>
                `;
                terminalLog.scrollTop = terminalLog.scrollHeight;

                // 1Îã®Í≥Ñ: Î™®Îì† ÌååÏùº Ï∂îÍ∞Ä (add .)
                const addResult = await window.electron.dgit.command('add', ['.'], currentProject.path);
                
                if (!addResult.success) {
                    throw new Error(`ÌååÏùº Ï∂îÍ∞Ä Ïã§Ìå®: ${addResult.error}`);
                }

                terminalLog.innerHTML += `
                    <div style="margin-bottom: 8px;">
                        <span style="color: var(--accent-blue);">üìÅ</span> 
                        <span style="color: var(--text-secondary);">[${new Date().toLocaleTimeString()}]</span>
                        ÌååÏùº Ï∂îÍ∞Ä ÏôÑÎ£å
                    </div>
                `;
                terminalLog.scrollTop = terminalLog.scrollHeight;

                // 2Îã®Í≥Ñ: Ïª§Î∞ã Ïã§Ìñâ
                const commitResult = await window.electron.dgit.command('commit', ['-m', message], currentProject.path);
                
                if (commitResult.success) {
                    // ÏÑ±Í≥µ Î°úÍ∑∏ Ï∂îÍ∞Ä
                    terminalLog.innerHTML += `
                        <div style="margin-bottom: 8px;">
                            <span style="color: var(--accent-green);">‚úì</span> 
                            <span style="color: var(--text-secondary);">[${new Date().toLocaleTimeString()}]</span>
                            Ïª§Î∞ã ÏôÑÎ£å: ${message}
                        </div>
                    `;
                    terminalLog.scrollTop = terminalLog.scrollHeight;
                    
                    showToast('Ïª§Î∞ãÏù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§ ‚úÖ', 'success');
                    
                    // ÌîÑÎ°úÏ†ùÌä∏ Îç∞Ïù¥ÌÑ∞ ÏÉàÎ°úÍ≥†Ïπ®
                    await loadProjectData();
                } else {
                    // Ïã§Ìå® Î°úÍ∑∏ Ï∂îÍ∞Ä
                    terminalLog.innerHTML += `
                        <div style="margin-bottom: 8px;">
                            <span style="color: var(--accent-red);">‚úó</span> 
                            <span style="color: var(--text-secondary);">[${new Date().toLocaleTimeString()}]</span>
                            Ïª§Î∞ã Ïã§Ìå®: ${commitResult.error || 'Ïïå Ïàò ÏóÜÎäî Ïò§Î•ò'}
                        </div>
                    `;
                    terminalLog.scrollTop = terminalLog.scrollHeight;
                    
                    showToast(`Ïª§Î∞ã Ïã§Ìå®: ${commitResult.error || 'Ïïå Ïàò ÏóÜÎäî Ïò§Î•ò'}`, 'error');
                }
            } catch (error) {
                console.error('Ïª§Î∞ã Ïã§Ìñâ Ïã§Ìå®:', error);
                
                // ÏóêÎü¨ Î°úÍ∑∏ Ï∂îÍ∞Ä
                const terminalLog = document.getElementById('terminalLog');
                terminalLog.innerHTML += `
                    <div style="margin-bottom: 8px;">
                        <span style="color: var(--accent-red);">‚úó</span> 
                        <span style="color: var(--text-secondary);">[${new Date().toLocaleTimeString()}]</span>
                        Ïª§Î∞ã Ïò§Î•ò: ${error.message}
                    </div>
                `;
                terminalLog.scrollTop = terminalLog.scrollHeight;
                
                showToast('Ïª§Î∞ã Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§', 'error');
            }
        }

        // Î∏åÎûúÏπò ÏÉùÏÑ±
        async function createBranch() {
            if (!currentProject) {
                showToast('ÌîÑÎ°úÏ†ùÌä∏Í∞Ä ÏÑ†ÌÉùÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§', 'warning');
                return;
            }

            try {
                // ÌòÑÏû¨ Î∏åÎûúÏπò ÌôïÏù∏
                const currentBranchResult = await window.electron.dgit.command('branch', ['--show-current'], currentProject.path);
                let currentBranch = 'main';
                
                if (currentBranchResult.success && currentBranchResult.output.trim()) {
                    currentBranch = currentBranchResult.output.trim();
                }

                showModal('ÏÉà Î∏åÎûúÏπò ÏÉùÏÑ±', 'Î∏åÎûúÏπò Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî', `
                    <div>
                        <input 
                            type="text" 
                            id="branchName" 
                            placeholder="feature/new-design"
                            style="
                                width: 100%;
                                padding: 12px;
                                background: var(--bg-secondary);
                                border: 1px solid var(--border-color);
                                border-radius: 6px;
                                color: var(--text-primary);
                                font-family: inherit;
                            "
                        />
                        <div style="margin-top: 16px; color: var(--text-secondary); font-size: 0.9rem;">
                            ÌòÑÏû¨ Î∏åÎûúÏπò: ${currentBranch}ÏóêÏÑú Î∂ÑÍ∏∞Îê©ÎãàÎã§
                        </div>
                    </div>
                `, () => {
                    const branchName = document.getElementById('branchName').value;
                    if (branchName.trim()) {
                        createNewBranch(branchName);
                    } else {
                        showToast('Î∏åÎûúÏπò Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî', 'warning');
                    }
                });
            } catch (error) {
                console.error('Î∏åÎûúÏπò ÏÉùÏÑ± Ï§ÄÎπÑ Ïã§Ìå®:', error);
                showToast('Î∏åÎûúÏπò ÏÉùÏÑ± Ï§ÄÎπÑ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§', 'error');
            }
        }

        async function createNewBranch(name) {
            closeModal();
            
            if (!currentProject) {
                showToast('ÌîÑÎ°úÏ†ùÌä∏Í∞Ä ÏÑ†ÌÉùÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§', 'error');
                return;
            }

            try {
                showToast('Î∏åÎûúÏπòÎ•º ÏÉùÏÑ±ÌïòÎäî Ï§ë...', 'success');
                
                const result = await window.electron.dgit.createBranch(currentProject.path, name);
                
                if (result.success) {
                    showToast(`Î∏åÎûúÏπò '${name}'Í∞Ä ÏÉùÏÑ±ÎêòÍ≥† Ï†ÑÌôòÎêòÏóàÏäµÎãàÎã§`, 'success');
                    
                    // ÌÑ∞ÎØ∏ÎÑêÏóê Î°úÍ∑∏ Ï∂îÍ∞Ä
                    const terminalLog = document.getElementById('terminalLog');
                    terminalLog.innerHTML += `
                        <div style="margin-bottom: 8px;">
                            <span style="color: var(--accent-green);">‚úì</span> 
                            <span style="color: var(--text-secondary);">[${new Date().toLocaleTimeString()}]</span>
                            Î∏åÎûúÏπò '${name}' ÏÉùÏÑ± Î∞è Ï†ÑÌôò ÏôÑÎ£å
                        </div>
                    `;
                    terminalLog.scrollTop = terminalLog.scrollHeight;
                    
                    // Î∏åÎûúÏπò Í∑∏ÎûòÌîÑ ÏóÖÎç∞Ïù¥Ìä∏ (Í∞ÑÎã®Ìïú ÏãúÍ∞ÅÌôî)
                    updateBranchGraph();
                } else {
                    showToast(`Î∏åÎûúÏπò ÏÉùÏÑ± Ïã§Ìå®: ${result.error || 'Ïïå Ïàò ÏóÜÎäî Ïò§Î•ò'}`, 'error');
                }
            } catch (error) {
                console.error('Î∏åÎûúÏπò ÏÉùÏÑ± Ïã§Ìå®:', error);
                showToast('Î∏åÎûúÏπò ÏÉùÏÑ± Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§', 'error');
            }
        }

        // Î∏åÎûúÏπò Í∑∏ÎûòÌîÑ ÏóÖÎç∞Ïù¥Ìä∏
        async function updateBranchGraph() {
            if (!currentProject) return;
            
            try {
                const result = await window.electron.dgit.listBranches(currentProject.path);
                
                if (result.success) {
                    const branchGraph = document.getElementById('branchGraph');
                    branchGraph.innerHTML = ''; // Í∏∞Ï°¥ ÎÇ¥Ïö© Ï†úÍ±∞
                    
                    const branches = result.output.split('\n')
                        .map(line => line.trim())
                        .filter(line => line && !line.startsWith('*'))
                        .map(line => line.replace(/^\*\s*/, ''));
                    
                    branches.forEach((branch, index) => {
                        const newNode = document.createElement('div');
                        newNode.className = 'branch-node';
                        newNode.style.left = (index * 80 + 50) + 'px';
                        newNode.style.top = (Math.sin(index) * 30 + 100) + 'px';
                        newNode.title = branch;
                        branchGraph.appendChild(newNode);
                    });
                }
            } catch (error) {
                console.error('Î∏åÎûúÏπò Í∑∏ÎûòÌîÑ ÏóÖÎç∞Ïù¥Ìä∏ Ïã§Ìå®:', error);
            }
        }

        // Î™®Îã¨ Í¥ÄÎ†® Ìï®ÏàòÎì§
        function showModal(title, subtitle, body, confirmCallback = null) {
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalSubtitle').textContent = subtitle;
            document.getElementById('modalBody').innerHTML = body;
            document.getElementById('modalOverlay').classList.add('show');
            
            // ÌôïÏù∏ Î≤ÑÌäº ÏΩúÎ∞± ÏÑ§Ï†ï
            window.currentModalCallback = confirmCallback;
        }

        function closeModal() {
            document.getElementById('modalOverlay').classList.remove('show');
            window.currentModalCallback = null;
        }

        function confirmModal() {
            if (window.currentModalCallback) {
                window.currentModalCallback();
            } else {
                closeModal();
            }
        }

        // ÏïåÎ¶º ÌÜ†Í∏Ä
        function toggleNotifications() {
            notificationsEnabled = !notificationsEnabled;
            
            const toggleButton = document.getElementById('notificationToggle');
            const toggleText = document.getElementById('notificationToggleText');
            const notificationIcon = document.getElementById('notificationIcon');
            
            if (notificationsEnabled) {
                toggleButton.className = 'btn btn-primary';
                toggleText.textContent = 'ÏºúÏßê';
                notificationIcon.textContent = 'üîî';
                showToast('ÏïåÎ¶ºÏù¥ ÌôúÏÑ±ÌôîÎêòÏóàÏäµÎãàÎã§', 'success');
            } else {
                toggleButton.className = 'btn btn-secondary';
                toggleText.textContent = 'Í∫ºÏßê';
                notificationIcon.textContent = 'üîï';
                showToast('ÏïåÎ¶ºÏù¥ ÎπÑÌôúÏÑ±ÌôîÎêòÏóàÏäµÎãàÎã§', 'warning');
            }
            
            // ÏÑ§Ï†ï Ï†ÄÏû•
            saveNotificationSettings();
        }

        // ÏïåÎ¶º ÏÑ§Ï†ï Ï†ÄÏû•
        async function saveNotificationSettings() {
            try {
                const config = await window.electron.config.load();
                if (config.success) {
                    config.config.notifications = notificationsEnabled;
                    await window.electron.config.save(config.config);
                }
            } catch (error) {
                console.error('ÏïåÎ¶º ÏÑ§Ï†ï Ï†ÄÏû• Ïã§Ìå®:', error);
            }
        }

        // ÌÜ†Ïä§Ìä∏ ÏïåÎ¶º
        function showToast(message, type = 'info') {
            // ÏïåÎ¶ºÏù¥ ÎπÑÌôúÏÑ±ÌôîÎêú Í≤ΩÏö∞ ÌëúÏãúÌïòÏßÄ ÏïäÏùå
            if (!notificationsEnabled) {
                return;
            }
            
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.style.cssText = `
                position: fixed;
                top: 60px;
                right: 20px;
                background: var(--bg-secondary);
                border: 1px solid var(--border-color);
                border-radius: 8px;
                padding: 12px 16px;
                min-width: 250px;
                max-width: 400px;
                z-index: 10000;
                animation: toastSlideIn 0.3s ease;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
                border-left: 4px solid ${type === 'success' ? 'var(--accent-green)' : type === 'error' ? 'var(--accent-red)' : type === 'warning' ? 'var(--accent-orange)' : 'var(--accent-blue)'};
            `;
            
            toast.innerHTML = `
                <div style="display: flex; align-items: center; gap: 8px;">
                    <span style="font-size: 1.2rem;">${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : type === 'warning' ? '‚ö†Ô∏è' : '‚ÑπÔ∏è'}</span>
                    <span style="color: var(--text-primary); font-weight: 500;">${message}</span>
                </div>
            `;
            
            document.body.appendChild(toast);
            
            // ÏãúÏä§ÌÖú ÏïåÎ¶ºÎèÑ ÌëúÏãú
            if (window.electron && window.electron.showNotification) {
                try {
                    window.electron.showNotification('DGit MAC', message);
                } catch (error) {
                    console.log('ÏãúÏä§ÌÖú ÏïåÎ¶º ÌëúÏãú Ïã§Ìå®:', error);
                }
            }
            
            // 3Ï¥à ÌõÑ ÏûêÎèô Ï†úÍ±∞
            setTimeout(() => {
                toast.style.animation = 'toastSlideIn 0.3s ease reverse';
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.remove();
                    }
                }, 300);
            }, 3000);
        }

        // ÌäπÏ†ï Ïª§Î∞ãÏúºÎ°ú Î≥µÏõê
        async function restoreToCommit(commitHash) {
            if (!currentProject) {
                showToast('ÌîÑÎ°úÏ†ùÌä∏Í∞Ä ÏÑ†ÌÉùÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§', 'warning');
                return;
            }

            showModal('Ïª§Î∞ãÏúºÎ°ú Î≥µÏõê', `Ïù¥ Ïª§Î∞ãÏúºÎ°ú Î≥µÏõêÌïòÏãúÍ≤†ÏäµÎãàÍπå?`, `
                <div style="padding: 20px;">
                    <p style="margin-bottom: 20px; color: var(--text-secondary);">
                        Î™®Îì† ÌååÏùºÏù¥ Ïª§Î∞ã <code>${commitHash}</code> ÏÉÅÌÉúÎ°ú Î≥µÏõêÎê©ÎãàÎã§.<br>
                        <strong style="color: var(--accent-red);">Ï£ºÏùò: ÌòÑÏû¨ Î≥ÄÍ≤ΩÏÇ¨Ìï≠ÏùÄ Î™®Îëê ÏÇ¨ÎùºÏßëÎãàÎã§.</strong>
                    </p>
                    <div style="display: flex; gap: 12px; justify-content: center;">
                        <button class="btn btn-secondary" onclick="closeModal()" style="padding: 12px 20px !important; background: #1a1a1a !important; color: #ffffff !important; font-size: 0.95rem !important; min-height: 40px !important; border-radius: 8px !important; border: none !important; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;">Ï∑®ÏÜå</button>
                        <button class="btn btn-primary" onclick="performRestoreToCommit('${commitHash}')" style="padding: 12px 20px !important; background: #007aff !important; color: #ffffff !important; font-size: 0.95rem !important; min-height: 40px !important; border-radius: 8px !important; border: none !important; box-shadow: 0 2px 8px rgba(0, 122, 255, 0.5) !important;">Î≥µÏõê Ïã§Ìñâ</button>
                    </div>
                </div>
            `);
        }

        // Ïª§Î∞ãÏúºÎ°ú Î≥µÏõê Ïã§Ìñâ
        async function performRestoreToCommit(commitHash) {
            closeModal();
            
            try {
                showToast('Ïª§Î∞ãÏúºÎ°ú Î≥µÏõêÌïòÎäî Ï§ë...', 'info');
                
                const result = await window.electron.dgit.command('reset', ['--hard', commitHash], currentProject.path);
                
                if (result.success) {
                    showToast(`Ïª§Î∞ã ${commitHash}Î°ú ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Î≥µÏõêÎêòÏóàÏäµÎãàÎã§`, 'success');
                    await loadProjectData();
                } else {
                    showToast(`Î≥µÏõê Ïã§Ìå®: ${result.error || 'Ïïå Ïàò ÏóÜÎäî Ïò§Î•ò'}`, 'error');
                }
            } catch (error) {
                console.error('Ïª§Î∞ã Î≥µÏõê Ïã§Ìå®:', error);
                showToast('Ïª§Î∞ã Î≥µÏõê Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§', 'error');
            }
        }

        // Ïª§Î∞ã Î≥ÄÍ≤ΩÏÇ¨Ìï≠ Î≥¥Í∏∞
        async function viewCommitDiff(commitHash) {
            if (!currentProject) {
                showToast('ÌîÑÎ°úÏ†ùÌä∏Í∞Ä ÏÑ†ÌÉùÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§', 'warning');
                return;
            }

            try {
                const result = await window.electron.dgit.command('show', ['--name-only', commitHash], currentProject.path);
                
                if (result.success) {
                    const files = result.output.split('\n').filter(line => line.trim() && !line.startsWith('commit'));
                    
                    showModal('Ïª§Î∞ã Î≥ÄÍ≤ΩÏÇ¨Ìï≠', `Ïª§Î∞ã ${commitHash}Ïùò Î≥ÄÍ≤ΩÎêú ÌååÏùº`, `
                        <div style="max-height: 300px; overflow-y: auto;">
                            ${files.length > 0 ? files.map(file => `
                                <div style="padding: 8px; background: var(--bg-secondary); margin-bottom: 4px; border-radius: 4px;">
                                    üìÑ ${file}
                                </div>
                            `).join('') : '<p>Î≥ÄÍ≤ΩÎêú ÌååÏùºÏù¥ ÏóÜÏäµÎãàÎã§.</p>'}
                        </div>
                    `);
                } else {
                    showToast('Ïª§Î∞ã Î≥ÄÍ≤ΩÏÇ¨Ìï≠ÏùÑ Í∞ÄÏ†∏Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§', 'error');
                }
            } catch (error) {
                console.error('Ïª§Î∞ã Î≥ÄÍ≤ΩÏÇ¨Ìï≠ Ï°∞Ìöå Ïã§Ìå®:', error);
                showToast('Ïª§Î∞ã Î≥ÄÍ≤ΩÏÇ¨Ìï≠ Ï°∞ÌöåÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§', 'error');
            }
        }

        // ÌÇ§Î≥¥Îìú Îã®Ï∂ïÌÇ§
        document.addEventListener('keydown', function(e) {
            if (e.metaKey || e.ctrlKey) {
                switch(e.key) {
                    case 'n':
                        e.preventDefault();
                        selectNewProject();
                        break;
                    case 'o':
                        e.preventDefault();
                        selectExistingProject();
                        break;
                    case 's':
                        e.preventDefault();
                        if (currentProject) {
                            commitChanges();
                        }
                        break;
                    case 'w':
                        e.preventDefault();
                        goHome();
                        break;
                    case 'r':
                        e.preventDefault();
                        showToast('ÏÉÅÌÉúÎ•º ÏÉàÎ°úÍ≥†Ïπ®ÌñàÏäµÎãàÎã§', 'success');
                        break;
                }
            }
            
            if (e.key === 'Escape') {
                if (document.getElementById('modalOverlay').classList.contains('show')) {
                    closeModal();
                } else if (currentProject) {
                    goHome();
                }
            }
        });

        // Î™®Îã¨ Ïò§Î≤ÑÎ†àÏù¥ ÌÅ¥Î¶≠Ïãú Îã´Í∏∞
        document.getElementById('modalOverlay').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
    </script>
</body>
</html>